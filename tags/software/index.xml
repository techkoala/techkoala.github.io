<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Software - æ ‡ç­¾ - TechKoala - Input/Output </title>
        <link>https://www.techkoala.top/tags/software/</link>
        <description>Software - æ ‡ç­¾ - TechKoala - Input/Output </description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>admin@techkoala.top (TechKoala)</managingEditor>
            <webMaster>admin@techkoala.top (TechKoala)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Tue, 20 Apr 2021 14:17:01 &#43;0800</lastBuildDate><atom:link href="https://www.techkoala.top/tags/software/" rel="self" type="application/rss+xml" /><item>
    <title>ä½¿ç”¨ Nginx å®ç°å¤šæœåŠ¡å¤ç”¨ç«¯å£</title>
    <link>https://www.techkoala.top/nginx_port_reuse/</link>
    <pubDate>Tue, 20 Apr 2021 14:17:01 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/nginx_port_reuse/</guid>
    <description><![CDATA[<blockquote>
<p>åˆ©ç”¨ Nginx åœ¨å•ä¸€æœåŠ¡å™¨ä¸Šæ­å»ºå¤šä¸ªåŒç«¯å£çš„æœåŠ¡</p>
</blockquote>
<h2 id="è¯´æ˜">è¯´æ˜</h2>
<p>ç›®å‰æœåŠ¡å™¨ä¸Šè¿è¡Œäº†ä¸€ä¸ª <code>Trojan</code> å®ä¾‹ä»¥åŠé€šè¿‡ <code>frp</code> ä¸æœ¬åœ°çš„æœåŠ¡å™¨é€šä¿¡ä»¥å®ç° <code>Bitwarden</code> çš„å†…ç½‘ç©¿é€è®¿é—®ã€‚</p>
<p>ä¸¤ä¸ªæœåŠ¡ä½¿ç”¨äº†ä¸åŒåŸŸåè¿›è¡ŒåŒºåˆ†ï¼Œä½†ä¸ºäº†ä¾¿æ·ï¼Œéƒ½ä½¿ç”¨ <code>443</code> ç«¯å£ã€‚</p>
<h2 id="æµç¨‹æ¦‚è§ˆ">æµç¨‹æ¦‚è§ˆ</h2>
<ol>
<li>é‡‡ç”¨ <code>Docker</code> åœ¨æœ¬åœ°æœåŠ¡å™¨ä¸Šæ­å»º <code>Bitwarden</code>ï¼Œé…ç½®å¹¶è¿è¡Œ <code>frpc</code> æŒ‡å‘æœåŠ¡å™¨ä¸Šçš„ <code>frps</code></li>
<li>åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºå…¶ä»–ç½‘ç«™æˆ–è€…éœ€è¦ä½¿ç”¨ <code>443</code> ç«¯å£çš„æœåŠ¡ï¼ˆå¦‚:<code>Trojan</code>)ï¼Œé…ç½®è¿è¡Œ <code>frps</code></li>
<li>å®‰è£… <code>Nginx</code>ï¼Œè¿™é‡Œéœ€è¦åˆ©ç”¨ <code>Nginx</code> çš„ <code>stream_ssl_preread</code> æ¨¡å—ï¼Œä½¿ç”¨<code>nginx -V</code>æŸ¥çœ‹æ˜¯å¦åŒ…å«è¯¥æ¨¡å—ã€‚ï¼ˆè¯¥æ¨¡å—åœ¨ <code>Nginx 1.19.2</code> å·²é»˜è®¤åŒ…å«ï¼Œä½† <code>Ubuntu</code> ç­‰å‘è¡Œç‰ˆè¿˜åœ¨ä½¿ç”¨æ›´è€çš„ <code>stable</code> ç‰ˆæœ¬ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ  <code>mainline</code> ç‰ˆæœ¬æºï¼Œå¹¶æ›´æ–° <code>Nginx</code> åˆ°æœ€æ–°ç‰ˆæœ¬ï¼‰</li>
</ol>
<h2 id="æœ¬åœ°é…ç½®æ–‡ä»¶">æœ¬åœ°é…ç½®æ–‡ä»¶</h2>
<h3 id="frpcini">frpc.ini</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[common]
server_addr = xxx.xxx.xxx.xxx           # æœåŠ¡å™¨åœ°å€
server_port = xxx                       # ä¸æœåŠ¡å™¨ frps é€šä¿¡çš„ç«¯å£
token = xxxxxx                          # frp éªŒè¯å¯†é’¥

[bitwarden_https]
type = https
local_port = 443
custom_domains = xxx.xxx.xxx            # Bitwarden åŸŸå
</code></pre></td></tr></table>
</div>
</div><h3 id="æœ¬åœ°-nginxcof">æœ¬åœ° nginx.cof</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">user www www;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;
worker_rlimit_nofile 8192;
events {
    worker_connections 4096;
}
http {
    include mime.types;
    default_type application/octet-stream;

    client_max_body_size 0;
    client_body_buffer_size 512k;

    sendfile on;
    sendfile_max_chunk 1m;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;

    types_hash_max_size 4096;

    proxy_cache_path /var/run/nginx-proxy-cache levels=1:2 keys_zone=cache_one:20m inactive=1d max_size=500m;
    proxy_cache cache_one;
    proxy_temp_path /var/run/proxy_temp_dir;
    proxy_temp_file_write_size 128k;
    proxy_next_upstream error timeout invalid_header http_500 http_503 http_404;
    proxy_buffer_size 16k;
    proxy_busy_buffers_size 24k;
    proxy_buffers 64 4k;

    gzip on;
    gzip_min_length 1k;
    gzip_buffers 4 16k;
    gzip_http_version 1.1;
    gzip_comp_level 2;
    gzip_types text/plain application/javascript application/x-javascript text/javascript text/css application/xml;
    gzip_vary on;
    gzip_proxied expired no-cache no-store private auth;
    gzip_disable &#34;MSIE [1-6]\.&#34;;

    server_tokens off;

    server {
        listen 443 ssl http2;
        server_name xxx.xxx.xxx;                        # åŸŸå

        ssl_certificate /xxx/cert/fullchain.pem;        # è¯ä¹¦è·¯å¾„
        ssl_certificate_key /xxx/cert/privkey.pem;
        ssl_protocols TLSv1.2 TLSv1.3;
        ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384;
        ssl_prefer_server_ciphers off;
        ssl_session_cache shared:SSL:10m;
        ssl_session_timeout 1d;

        location / {
            proxy_pass http://127.0.0.1:8080;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        location /notifications/hub {
            proxy_pass http://127.0.0.1:3012;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection &#34;upgrade&#34;;
        }

        location /notifications/hub/negotiate {
            proxy_pass http://127.0.0.1:8080;
        }
    }
}
</code></pre></td></tr></table>
</div>
</div><h2 id="æœåŠ¡å™¨é…ç½®æ–‡ä»¶">æœåŠ¡å™¨é…ç½®æ–‡ä»¶</h2>
<h3 id="frpsini">frps.ini</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[common]
bind_port = xxxx                # ä¸æœ¬åœ° frpc é€šä¿¡çš„ç«¯å£
vhost_https_port = xxxx         # è™šæ‹Ÿ https ç«¯å£ï¼Œéœ€è¦å’Œ nginx.conf å†…ä¸€è‡´
authentication_method = token
token = xxxxxx                  # frp éªŒè¯å¯†é’¥
</code></pre></td></tr></table>
</div>
</div><h3 id="æœåŠ¡å™¨-nginxcof">æœåŠ¡å™¨ nginx.cof</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">user www-data;
worker_processes auto;
pid /var/run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
	worker_connections 768;
	# multi_accept on;
}

stream {
    map $ssl_preread_server_name $name {
        xxx.xxx.xxx frps-bitwarden;   # Bitwarden åŸŸå
        xxx.xxx.xxx trojan;           # Trojan åŸŸå
    }
    upstream frps-bitwarden {
        server 127.0.0.1:8080;        # Bitwardençš„ frps ç«¯å£
    }
    upstream trojan {
        server 127.0.0.1:4443;        # Trojan æœ¬åœ°ç›‘å¬ç«¯å£
    }
    server {
        listen 443 reuseport;
        listen [::]:443 reuseport;
        proxy_pass	$name;
        ssl_preread on;               # å¼€å¯ ssl_preread
    }
}

http {
	##
	# Basic Settings
	##

	sendfile on;
	tcp_nopush on;
	tcp_nodelay on;
	keepalive_timeout 65;
	types_hash_max_size 2048;
	# server_tokens off;

	# server_names_hash_bucket_size 64;
	# server_name_in_redirect off;

	include /etc/nginx/mime.types;
	default_type application/octet-stream;

	##
	# SSL Settings
	##

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
	ssl_prefer_server_ciphers on;

	##
	# Logging Settings
	##

	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;

	##
	# Gzip Settings
	##

	gzip on;

	# gzip_vary on;
	# gzip_proxied any;
	# gzip_comp_level 6;
	# gzip_buffers 16 8k;
	# gzip_http_version 1.1;
	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

	##
	# Virtual Host Configs
	##

	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;     # å¯ç”¨çš„ç½‘ç«™é…ç½®æ”¾ç½®åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹
}

</code></pre></td></tr></table>
</div>
</div><h3 id="bitwarden-nginx-é…ç½®">Bitwarden Nginx é…ç½®</h3>
<p>æ”¾ç½®åœ¨<code>/etc/nginx/sites-enabled/</code>ä¸‹ï¼Œä¸åŸŸååŒå</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">## Bitwarden é…ç½®ã€‚åªè´Ÿè´£åªå°† http é‡å®šå‘è‡³ https
## Bitwarden çš„ SSL æ¡æ‰‹äº¤ç»™æœ¬åœ°æœåŠ¡å™¨ç«¯çš„ Nginx å¤„ç†
server {
        listen 80;
        listen [::]:80;
        server_name xxx.xxx.xxx;                    # Bitwarden åŸŸå
        return 301 https://xxx.xxx.xxx$request_uri; # Bitwarden åŸŸå
}

</code></pre></td></tr></table>
</div>
</div><p>é“¾æ¥é…ç½®æ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ln -s /etc/nginx/sites-available/xxx.xxx.xxx /etc/nginx/sites-enabled/
</code></pre></td></tr></table>
</div>
</div><h3 id="trojan-nginx-é…ç½®">Trojan Nginx é…ç½®</h3>
<p>æ”¾ç½®åœ¨<code>/etc/nginx/sites-enabled/</code>ä¸‹ï¼Œä¸åŸŸååŒå</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">server {
    listen 127.0.0.1:80 default_server;
    server_name xxx.xxx.xxx;                   # è‡ªå·±çš„åŸŸå
    location / {
        proxy_pass https://www.aliexpress.com; # ä¼ªè£…çš„ç½‘ç«™ï¼Œè¿™é‡Œæ˜¯é˜¿é‡Œé€Ÿå–é€š
    }
}
server {
    listen 127.0.0.1:80;
    server_name xxx.xxx.xxx.xxx;                 # è‡ªå·±æœåŠ¡å™¨çš„ IP
    return 301 https://xxx.xxx.xxx$request_uri;  # è‡ªå·±çš„åŸŸå
}
server {
    listen 0.0.0.0:80;
    listen [::]:80;
    server_name _;
    return 301 https://$host$request_uri;
}

</code></pre></td></tr></table>
</div>
</div><p>é“¾æ¥é…ç½®æ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">ln -s /etc/nginx/sites-available/xxx.xxx.xxx /etc/nginx/sites-enabled/
</code></pre></td></tr></table>
</div>
</div><h3 id="trojan-é…ç½®">Trojan é…ç½®</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{
    &#34;run_type&#34;: &#34;server&#34;,
    &#34;local_addr&#34;: &#34;0.0.0.0&#34;,
    &#34;local_port&#34;: 4443,             # æœ¬åœ°ç›‘å¬ç«¯å£ï¼Œä¸ nginx.conf ä¿æŒä¸€è‡´
    &#34;remote_addr&#34;: &#34;127.0.0.1&#34;,
    &#34;remote_port&#34;: 80,              # ä¼ªè£…ç«™ç‚¹çš„ç«¯å£
    &#34;password&#34;: [
        &#34;xxxxxx&#34;                    # å¯†é’¥
    ],
    &#34;log_level&#34;: 1,
    &#34;ssl&#34;: {
        &#34;cert&#34;: &#34;/usr/local/etc/ssl/certificate.crt&#34;,
        &#34;key&#34;: &#34;/usr/local/etc/ssl/private.key&#34;,
        &#34;key_password&#34;: &#34;&#34;,
        &#34;cipher&#34;: &#34;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384&#34;,
        &#34;cipher_tls13&#34;: &#34;TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384&#34;,
        &#34;prefer_server_cipher&#34;: true,
        &#34;alpn&#34;: [
            &#34;http/1.1&#34;
        ],
        &#34;alpn_port_override&#34;: {
            &#34;h2&#34;: 81
        },
        &#34;reuse_session&#34;: true,
        &#34;session_ticket&#34;: false,
        &#34;session_timeout&#34;: 600,
        &#34;plain_http_response&#34;: &#34;&#34;,
        &#34;curves&#34;: &#34;&#34;,
        &#34;dhparam&#34;: &#34;&#34;
    },
    &#34;tcp&#34;: {
        &#34;prefer_ipv4&#34;: false,
        &#34;no_delay&#34;: true,
        &#34;keep_alive&#34;: true,
        &#34;reuse_port&#34;: false,
        &#34;fast_open&#34;: false,
        &#34;fast_open_qlen&#34;: 20
    },
    &#34;mysql&#34;: {
        &#34;enabled&#34;: false,
        &#34;server_addr&#34;: &#34;127.0.0.1&#34;,
        &#34;server_port&#34;: 3306,
        &#34;database&#34;: &#34;trojan&#34;,
        &#34;username&#34;: &#34;trojan&#34;,
        &#34;password&#34;: &#34;&#34;,
        &#34;key&#34;: &#34;&#34;,
        &#34;cert&#34;: &#34;&#34;,
        &#34;ca&#34;: &#34;&#34;
    }
}
</code></pre></td></tr></table>
</div>
</div><h2 id="é˜²ç«å¢™è®¾ç½®">é˜²ç«å¢™è®¾ç½®</h2>
<p>ä¸Šè¿°æ“ä½œåï¼ŒæœåŠ¡å™¨éœ€è¦æ‰“å¼€<code>80</code>,<code>443</code>,<code>xxx</code>ï¼ˆfrp é€šä¿¡ç«¯å£ï¼‰</p>]]></description>
</item><item>
    <title>Vim å°æŠ€å·§</title>
    <link>https://www.techkoala.top/vim_tips/</link>
    <pubDate>Tue, 19 Jan 2021 19:34:18 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/vim_tips/</guid>
    <description><![CDATA[<blockquote>
<p>è®°å½•ä½¿ç”¨ Vim æ—¶é‡åˆ°å®ç”¨çš„å°æŠ€å·§</p>
</blockquote>
<h2 id="å…¨å±€å‘½ä»¤-global">å…¨å±€å‘½ä»¤ g(lobal)</h2>
<p>vim è¿›å…¥æ–‡ä»¶ï¼Œå‘½ä»¤è¡Œæ¨¡å¼ä¸‹æ‰§è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:[range]global[!]/{pattern}/{command}
</code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå³ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:[range]g/pattern/command
</code></pre></td></tr></table>
</div>
</div><ul>
<li>[range] æŒ‡å®šæ–‡æœ¬èŒƒå›´,é»˜è®¤ä¸ºæ•´ä¸ªæ–‡æ¡£</li>
<li>pattern åœ¨èŒƒå›´ range å†…çš„è¡Œå¦‚æœåŒ¹é… patternï¼Œåˆ™æ‰§è¡Œ command</li>
<li>! è¡¨ç¤ºå–åï¼Œä¹Ÿå°±æ˜¯ä¸åŒ¹é…çš„è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ vglobal</li>
<li>command é»˜è®¤æ˜¯æ‰“å°æ–‡æœ¬</li>
</ul>
<h3 id="tip1-èŒƒå›´åŒ¹é…">Tip.1 èŒƒå›´åŒ¹é…</h3>
<p>20 è¡Œåˆ° 200 è¡Œä¹‹é—´ï¼Œæ¯ä¸€è¡Œä¸‹æ’å…¥ç©ºè¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:20,200g/^/pu _
</code></pre></td></tr></table>
</div>
</div><h3 id="tip2-åˆ é™¤åŒ…å«å­—ç¬¦-pattern-çš„æ‰€æœ‰è¡Œ">Tip.2 åˆ é™¤åŒ…å«å­—ç¬¦ pattern çš„æ‰€æœ‰è¡Œ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g/pattern/d
</code></pre></td></tr></table>
</div>
</div><h3 id="tip3-åˆ é™¤ç©ºç™½è¡Œ">Tip.3 åˆ é™¤ç©ºç™½è¡Œ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g/^$/d
</code></pre></td></tr></table>
</div>
</div><h3 id="tip4-åˆ é™¤ä¸åŒ¹é…çš„è¡Œ">Tip.4 åˆ é™¤ä¸åŒ¹é…çš„è¡Œ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g!/pattern/d
:v/pattern/d
</code></pre></td></tr></table>
</div>
</div><h3 id="tip5-åˆ é™¤å¤§é‡åŒ¹é…è¡Œ">Tip.5 åˆ é™¤å¤§é‡åŒ¹é…è¡Œ</h3>
<p>Vim åœ¨åˆ é™¤æ“ä½œæ—¶ï¼Œä¼šå…ˆæŠŠè¦åˆ é™¤çš„å†…å®¹æ”¾åˆ°å¯„å­˜å™¨ä¸­ï¼Œå‡å¦‚æ²¡æœ‰æŒ‡å®šå¯„å­˜å™¨ï¼Œä¼šé»˜è®¤æ”¾åˆ°ä¸€ä¸ªæœªå‘½åçš„å¯„å­˜å™¨ä¸­ï¼Œå¯¹äºè¦åˆ é™¤å¤§é‡åŒ¹é…è¡Œçš„è¡Œä¸ºï¼Œå¯èƒ½å¯¼è‡´ Vim èŠ±ä¸€äº›æ—¶é—´å¤„ç†è¿™äº›æ‹·è´ï¼Œé¿å…èŠ±è´¹ä¸å¿…è¦çš„æ—¶é—´å¯ä»¥æŒ‡å®šä¸€ä¸ª blackhole å¯„å­˜å™¨ _</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g/pattern/d_
</code></pre></td></tr></table>
</div>
</div><h3 id="tip6-ç§»åŠ¨åŒ¹é…çš„è¡Œ">Tip.6 ç§»åŠ¨åŒ¹é…çš„è¡Œ</h3>
<p>å°†æ‰€æœ‰åŒ¹é…çš„è¡Œç§»åŠ¨åˆ°æ–‡ä»¶çš„æœ«å°¾</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g/pattern/m$
</code></pre></td></tr></table>
</div>
</div><h3 id="tip7-å¤åˆ¶åŒ¹é…çš„è¡Œ">Tip.7 å¤åˆ¶åŒ¹é…çš„è¡Œ</h3>
<p>å°†æ‰€æœ‰åŒ¹é…çš„è¡Œå¤åˆ¶åˆ°æ–‡ä»¶æœ«å°¾</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g/pattern/t$
</code></pre></td></tr></table>
</div>
</div><h3 id="tip8-å¤åˆ¶åˆ°-register-a">Tip.8 å¤åˆ¶åˆ° register a</h3>
<p>Vim æ¯ä¸ªå­—æ¯éƒ½æ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œæ‰€ä»¥ä½¿ç”¨å…¨å±€å‘½ä»¤ä¹Ÿå¯ä»¥å°†å†…å®¹å¤åˆ¶åˆ°æŸä¸€ä¸ªå¯„å­˜å™¨ï¼Œæ¯”å¦‚ a</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">qaq:g/pattern/y A
</code></pre></td></tr></table>
</div>
</div><ul>
<li>qaq æ¸…ç©ºå¯„å­˜å™¨ aï¼Œqa å¼€å§‹è®°å½•å‘½ä»¤åˆ° a å¯„å­˜å™¨ï¼Œq åœæ­¢è®°å½•</li>
<li>y A å°†åŒ¹é…çš„è¡Œ A (append) è¿½åŠ åˆ°å¯„å­˜å™¨ a ä¸­
å­˜æ”¾åˆ° a å¯„å­˜å™¨ä¹‹åå°±å¯ä»¥ä½¿ç”¨ &ldquo;ap æ¥ç²˜è´´ä½¿ç”¨æˆ–è€…å…¶ä»–æ“ä½œäº†</li>
</ul>
<h3 id="tip9-åè½¬æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œ">Tip.9 åè½¬æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g/^/m0
</code></pre></td></tr></table>
</div>
</div><p>:g å‘½ä»¤ä¸€è¡Œè¡ŒåŒ¹é…ï¼ŒåŒ¹é…ç¬¬ä¸€è¡Œæ—¶å°†ç¬¬ä¸€è¡Œ m0 æ”¾åˆ°æ–‡ä»¶é¡¶éƒ¨ï¼Œç¬¬äºŒè¡Œæ”¾åˆ°æ–‡ä»¶é¡¶éƒ¨ï¼Œå½“è·‘å®Œä¸€éä¹‹åæ•´ä¸ªæ–‡ä»¶çš„æ¯ä¸€è¡Œå°±åè½¬äº†</p>
<h3 id="tip10-åœ¨åŒ¹é…è¡Œåæ·»åŠ æ–‡å­—">Tip.10 åœ¨åŒ¹é…è¡Œåæ·»åŠ æ–‡å­—</h3>
<p>ä½¿ç”¨ s å‘½ä»¤å¯ä»¥å®ç°ï¼ŒåŒæ ·ä½¿ç”¨å…¨å±€ g å‘½ä»¤ä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„æ•ˆæœ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">:g/pattern/s/$/mytext
</code></pre></td></tr></table>
</div>
</div><p>To be continued&hellip;</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>[1] <a href="http://einverne.github.io/post/2017/10/vim-global.html" target="_blank" rel="noopener noreferrer">Vim å…¨å±€å‘½ä»¤ g</a></li>
</ul>]]></description>
</item><item>
    <title>ç½‘ç»œåˆ†æå·¥å…·ï¼šNetCat</title>
    <link>https://www.techkoala.top/netcat/</link>
    <pubDate>Wed, 19 Aug 2020 23:15:35 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/netcat/</guid>
    <description><![CDATA[<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Network/NetCat/netcat.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Network/NetCat/netcat.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Network/NetCat/netcat.webp" data-sub-html="<h2>ç½‘ç»œç‘å£«å†›åˆ€ â€”â€” NetCat</h2>">
        
    </a><figcaption class="image-caption">ç½‘ç»œç‘å£«å†›åˆ€ â€”â€” NetCat</figcaption>
    </figure>
<h2 id="ä»€ä¹ˆæ˜¯-netcat">ä»€ä¹ˆæ˜¯ NetCat</h2>
<p>ç®€å•æ¥è¯´ï¼ŒNetCat (nc) æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œèƒ½å¤Ÿè®©ä½ å¾ˆæ–¹ä¾¿ã€å¾ˆçµæ´»åœ°æ“çºµ <code>ä¼ è¾“å±‚åè®®</code>ï¼ˆTCP ï¼† UDPï¼‰</p>
<p>nc å¯ä»¥åœ¨ä¸¤å°è®¾å¤‡ä¸Šé¢ç›¸äº’äº¤äº’ï¼Œå³<code>ä¾¦å¬æ¨¡å¼</code>/<code>ä¼ è¾“æ¨¡å¼</code></p>
<p>nc åŒ…å«ä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š</p>
<ul>
<li>Telnet åŠŸèƒ½</li>
<li>è·å– banner ä¿¡æ¯</li>
<li>ä¼ è¾“æ–‡æœ¬ä¿¡æ¯</li>
<li>ä¼ è¾“æ–‡ä»¶ / ç›®å½•</li>
<li>åŠ å¯†ä¼ è¾“æ–‡ä»¶ï¼Œé»˜è®¤ä¸åŠ å¯†</li>
<li>è¿œç¨‹æ§åˆ¶</li>
<li>åŠ å¯†æ‰€æœ‰æµé‡</li>
<li>æµåª’ä½“æœåŠ¡å™¨</li>
<li>è¿œç¨‹å…‹éš†ç¡¬ç›˜</li>
</ul>
<h2 id="ä½¿ç”¨-netcat">ä½¿ç”¨ NetCat</h2>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œnc çš„å‘½ä»¤è¡ŒåŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc å‘½ä»¤é€‰é¡¹ ä¸»æœº ç«¯å£
</code></pre></td></tr></table>
</div>
</div><h3 id="å‘½ä»¤é€‰é¡¹">å‘½ä»¤é€‰é¡¹</h3>
<blockquote>
<p>æœ¬æ–‡å†…å®¹åŸºäº OpenBSD ç¤¾åŒºçš„å˜ç§ï¼ˆä¹Ÿå« OpenBSD netcatï¼Œéƒ¨åˆ†å‘½ä»¤ä¸åŸç‰ˆæœ‰å·®å¼‚ã€‚ ï¼‰</p>
</blockquote>
<p>ä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å¸¸ç”¨é€‰é¡¹ï¼Œæ›´å¤šé€‰é¡¹å‚è§ <a href="https://man.openbsd.org/nc.1" target="_blank" rel="noopener noreferrer">OpenBSD manual page</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">é€‰é¡¹	   æ˜¯å¦æœ‰ â€œé€‰é¡¹å€¼â€	   è¯´æ˜
-h	   NO	           è¾“å‡º nc çš„å¸®åŠ©
-v	   NO	           åœ¨ç½‘ç»œé€šè®¯æ—¶ï¼Œæ˜¾ç¤ºè¯¦ç»†çš„è¾“å‡ºä¿¡æ¯
-n	   NO	           å¯¹å‘½ä»¤è¡Œä¸­çš„ä¸»æœºï¼Œä¸è¿›è¡ŒåŸŸåè§£æï¼Œå¦‚æœä¸»æœºæ˜¯ IP åœ°å€ï¼Œéœ€è¦ç”¨è¯¥é€‰é¡¹
-p	  YES	           æŒ‡å®šç«¯å£å·
-l	  NO	           å¼€å¯ç›‘å¬æ¨¡å¼ï¼Œnc ä½œä¸ºæœåŠ¡ç«¯ï¼Œå¦‚ä¸åŠ ï¼Œnc é»˜è®¤ä½œä¸ºå®¢æˆ·ç«¯
-u	  NO	           ä½¿ç”¨ UDP åï¼Œå¦‚ä¸åŠ è¯¥é€‰é¡¹ï¼Œé»˜è®¤æ˜¯ TCP åè®®
-w	  YES	           è®¾ç½®è¿æ¥çš„è¶…æ—¶é—´éš”ï¼ˆN ç§’ï¼‰
-q	  YES	           è®© nc å»¶æ—¶ï¼ˆN ç§’ï¼‰å†é€€å‡º
-z	  NO	           å¼€å¯ zero-I/O æ¨¡å¼ï¼Œè¯¥é€‰é¡¹ä»…ç”¨äºç«¯å£æ‰«æ
-k	  NO	           é…åˆ -l é€‰é¡¹ä½¿ç”¨ï¼Œå¯ä»¥é‡å¤æ¥å—å®¢æˆ·ç«¯è¿æ¥
-X	  YES	           æŒ‡å®šä»£ç†çš„ç±»å‹
-x	  YES	           ä»¥ IP:port çš„æ ¼å¼æŒ‡å®šä»£ç†
-d    NO               åå°æ¨¡å¼
</code></pre></td></tr></table>
</div>
</div><h3 id="ä¸»æœº">ä¸»æœº</h3>
<p>è¿™éƒ¨åˆ†å¯ä»¥æ²¡æœ‰ï¼Œå¯ä»¥ä»¥ <code>IP åœ°å€</code> å½¢å¼è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ä»¥ <code>åŸŸå</code> å½¢å¼è¡¨ç¤ºã€‚</p>
<h3 id="ç«¯å£">ç«¯å£</h3>
<p>è¿™éƒ¨åˆ†å¯ä»¥æ²¡æœ‰ï¼Œå¯ä»¥æ˜¯å•ä¸ªç«¯å£ï¼Œå¯ä»¥æ˜¯ç«¯å£èŒƒå›´ã€‚</p>
<h2 id="å¸¸ç”¨ä½¿ç”¨åœºæ™¯ç¤ºä¾‹">å¸¸ç”¨ä½¿ç”¨åœºæ™¯ç¤ºä¾‹</h2>
<h3 id="æµ‹è¯•æŸä¸ªè¿œç¨‹ä¸»æœºçš„ç›‘å¬ç«¯å£æ˜¯å¦å¯è¾¾">æµ‹è¯•æŸä¸ªè¿œç¨‹ä¸»æœºçš„ç›‘å¬ç«¯å£æ˜¯å¦å¯è¾¾</h3>
<p>ç»å¸¸æœ‰è¿™ç§éœ€æ±‚ï¼Œè¦åˆ¤æ–­æŸä¸ªä¸»æœºçš„ç›‘å¬ç«¯å£æ˜¯å¦èƒ½è¿ä¸Šã€‚å¯¼è‡´ç›‘å¬ç«¯å£æ— æ³•è¿æ¥ï¼Œé€šå¸¸æœ‰ä¸¤ç§åŸå› ï¼š</p>
<ol>
<li>ç›‘å¬ç«¯å£æ²¡å¼€å¯</li>
<li>ç›‘å¬ç«¯å£è™½ç„¶å¼€å¯ï¼Œä½†æ˜¯è¢«é˜²ç«å¢™é˜»æ‹¦äº†</li>
</ol>
<p>å¯¹ç¬¬ 1 ä¸ªåŸå› ï¼Œï¼ˆå¦‚æœä½ èƒ½åœ¨è¯¥ä¸»æœºä¸Šè¿è¡Œå‘½ä»¤ï¼‰å¯ä»¥ç›´æ¥ç”¨ <code>netstat</code> è¿™ä¸ªå‘½ä»¤æŸ¥çœ‹ç›‘å¬ç«¯å£æ˜¯å¦å¼€å¯ï¼›ä½†å¯¹äºç¬¬ 2 ä¸ªåŸå› ï¼Œ<code>netstat</code> å°±ç”¨ä¸ä¸Šäº†ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ç”¨ nc æ¥å¸®ä½ æå®šã€‚</p>
<p>ç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥æµ‹è¯•æŸä¸ª IP åœ°å€ä¸Šçš„æŸä¸ªç›‘å¬ç«¯å£æ˜¯å¦å¼€å¯:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc -nv ip port
</code></pre></td></tr></table>
</div>
</div><p><strong>æ³¨ï¼š</strong>ã€€é»˜è®¤æƒ…å†µä¸‹ nc ä¼šç­‰å¾…å¾ˆä¹…ï¼Œç„¶åæ‰å‘Šè¯‰ä½ è¿æ¥å¤±è´¥ã€‚å¦‚æœä½ æ‰€å¤„çš„ç½‘ç»œç¯å¢ƒç¨³å®šä¸”é«˜é€Ÿï¼ˆæ¯”å¦‚ï¼šå±€åŸŸç½‘å†…ï¼‰ï¼Œé‚£ä¹ˆï¼Œä½ å¯ä»¥è¿½åŠ  <code>-w</code> é€‰é¡¹ï¼Œè®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå°çš„è¶…æ—¶å€¼ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œè¶…æ—¶å€¼è®¾ä¸º 3 ç§’ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc -nv -w <span class="m">3</span> ip port
</code></pre></td></tr></table>
</div>
</div><h3 id="åˆ¤æ–­é˜²ç«å¢™æ˜¯å¦å…è®¸-or-ç¦æ­¢æŸä¸ªç«¯å£">åˆ¤æ–­é˜²ç«å¢™æ˜¯å¦å…è®¸ or ç¦æ­¢æŸä¸ªç«¯å£</h3>
<p>å‡è®¾ä½ æ­£åœ¨é…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œç¦æ­¢ TCP çš„ 8080 ç«¯å£å¯¹å¤–ç›‘å¬ã€‚é‚£ä¹ˆï¼Œä½ å¦‚ä½•éªŒè¯è‡ªå·±çš„é…ç½®ç”Ÿæ•ˆï¼Ÿ</p>
<p>ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œè®¾æƒ³å¦‚ä¸‹åœºæ™¯ï¼š
æœ‰ä¸¤å°ä¸»æœº â€”â€”<code>ä¸»æœº C</code> å……å½“å®¢æˆ·ç«¯ï¼Œ<code>ä¸»æœº S</code> å……å½“æœåŠ¡ç«¯ã€‚
ç„¶åè¦åˆ¤æ–­<code>ä¸»æœº S</code> ä¸Šçš„é˜²ç«å¢™æ˜¯å¦ä¼šæ‹¦æˆªå…¶å®ƒä¸»æœºå¯¹ 8080 TCP ç«¯å£çš„è¿æ¥ã€‚</p>
<p>åœ¨<code>ä¸»æœº S</code> ä¸Šè¿è¡Œ ncï¼Œè®©å®ƒåœ¨ 8080 ç«¯å£ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc -lv -p <span class="m">8080</span>
</code></pre></td></tr></table>
</div>
</div><p>ç„¶ååœ¨ â€œä¸»æœº Câ€ ä¸Šè¿è¡Œ ncï¼Œæµ‹è¯• â€œä¸»æœº Sâ€ ä¸Šçš„ 8080 ç«¯å£æ˜¯å¦å¯è¾¾</p>
<p><strong>æ³¨ï¼š</strong>ã€€åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œnc å¼€å¯ listen æ¨¡å¼å……å½“æœåŠ¡ç«¯ï¼Œåœ¨æ¥å—<strong>ç¬¬ä¸€æ¬¡</strong>å®¢æˆ·ç«¯è¿æ¥ä¹‹åï¼Œå°±ä¼šæŠŠç›‘å¬ç«¯å£å…³é—­ã€‚å¦‚æœä½ æƒ³è¦è®© nc å§‹ç»ˆç›‘å¬æ¨¡å¼ï¼Œä½¿ä¹‹èƒ½<strong>é‡å¤</strong>æ¥å—å®¢æˆ·ç«¯å‘èµ·çš„è¿æ¥ï¼Œå¯ä»¥è¿½åŠ  <code>-k</code> é€‰é¡¹ã€‚</p>
<h3 id="ç«¯å£æ‰«æ">ç«¯å£æ‰«æ</h3>
<p>ä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼Œç”¨æ¥æ‰«æçš„ç«¯å£èŒƒå›´ä» 1 åˆ° 1024</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc -znv ip 1-1024
</code></pre></td></tr></table>
</div>
</div><p>é€‰é¡¹ -z
æ˜¯æŒ‡å¼€å¯ <code>zero-I/O æ¨¡å¼</code>ã€‚è¯¥æ¨¡å¼ nc åªåˆ¤æ–­æŸä¸ªç›‘å¬ç«¯å£æ˜¯å¦èƒ½è¿ä¸Šï¼Œè¿ä¸Šå<strong>ä¸</strong>ä¸å¯¹ç«¯è¿›è¡Œæ•°æ®é€šè®¯ã€‚</p>
<p>**æ³¨ï¼š**ç«¯å£æ‰«æçš„æ—¶å€™ï¼Œ<code>-v</code> é€‰é¡¹ä¼šæŠŠæˆåŠŸ/å¤±è´¥çš„ç»“æœç»Ÿç»Ÿæ‰“å°å‡ºæ¥ã€‚é€šå¸¸å…³æ³¨çš„éƒ½æ˜¯ â€œæ‰«ææˆåŠŸâ€ çš„é‚£äº›ç«¯å£ã€‚å› æ­¤ï¼Œå¯ä»¥ç”¨å¯ä»¥é…åˆä½¿ç”¨ <code>grep</code> è¿‡æ»¤ä¸€ä¸‹ï¼Œåªæ‰“å°æ‰«å‡ºæ¥çš„ç«¯å£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc -znv ip 1-1024  2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> grep succeeded
</code></pre></td></tr></table>
</div>
</div><p>æ­¤å¤–ï¼Œç”±äº <code>-v</code> é€‰é¡¹äº§ç”Ÿçš„è¾“å‡ºä½äº <code>stderr</code>ï¼Œä¸Šè¿°å‘½ä»¤ä¸­çš„ <code>2&gt;&amp;1</code> ç”¨æ¥æŠŠ <code>stderr</code> åˆå¹¶åˆ° <code>stdout</code>ã€‚</p>
<p><strong>å¦ï¼š</strong> nc é»˜è®¤è¶…æ—¶è¾ƒå¤§ï¼Œå¯¼è‡´æ‰«æé€Ÿåº¦è¾ƒæ…¢ã€‚å»ºè®®æ ¹æ®ç½‘ç»œæƒ…å†µåˆç†è®¾ç½®è¶…æ—¶å€¼ï¼ŒåŠ å¿«æ‰«æé€Ÿåº¦ã€‚</p>
<h3 id="æ¢æµ‹æœåŠ¡å™¨ç±»å‹å’Œè½¯ä»¶ç‰ˆæœ¬">æ¢æµ‹æœåŠ¡å™¨ç±»å‹å’Œè½¯ä»¶ç‰ˆæœ¬</h3>
<p>å¦‚æœæŸä¸ªæœåŠ¡å™¨è¿è¡Œäº† SSH æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥çœ‹å‡ºï¼šè¯¥æœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿç±»å‹ï¼Œä»¥åŠ SSH server çš„ç‰ˆæœ¬ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">echo</span> <span class="s2">&#34;EXIT&#34;</span> <span class="p">|</span> nc -vq <span class="m">5</span> -n ip <span class="m">22</span>
OR
<span class="nb">echo</span> <span class="s2">&#34;EXIT&#34;</span> <span class="p">|</span> nc -vq <span class="m">5</span> domain <span class="m">22</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="ç«¯å£è½¬å‘">ç«¯å£è½¬å‘</h3>
<p>ç”¨ nc è¿›è¡Œç«¯å£è½¬å‘ï¼Œéœ€è¦è¿è¡Œä¸¤ä¸ª nc è¿›ç¨‹ï¼Œä¸€ä¸ªå……å½“<code>æœåŠ¡ç«¯</code>ï¼Œå¦ä¸€ä¸ªæ˜¯<code>å®¢æˆ·ç«¯</code>ï¼Œç„¶åç”¨ç®¡é“è®©æŠŠä¸¤ä¸ªè¿›ç¨‹çš„<code>æ ‡å‡†è¾“å…¥è¾“å‡º``äº¤å‰é…å¯¹</code>ã€‚æ‰€è°“çš„<code>äº¤å‰é…å¯¹</code>å°±æ˜¯â€”â€”æ¯ä¸€ä¸ª nc è¿›ç¨‹çš„<code>æ ‡å‡†è¾“å‡º</code>éƒ½å¯¹æ¥åˆ°å¦ä¸€ä¸ª nc è¿›ç¨‹çš„<code>æ ‡å‡†è¾“å…¥</code>ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œå°±å¯ä»¥å®Œç¾åœ°å»ºç«‹åŒå‘é€šè®¯ã€‚</p>
<p>æ­¥éª¤ 1ï¼šåˆ›å»ºå‘½åç®¡é“</p>
<p>ç”¨ä¸‹é¢è¿™ä¸ªç®€å•çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ª â€œå‘½åç®¡é“â€ï¼Œå…¶åç§°å«åš nc_pipe</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkfifo nc_pipe
</code></pre></td></tr></table>
</div>
</div><p>æ­¥éª¤ 2ï¼šåŒæ—¶å¯åŠ¨ä¸¤ä¸ª nc</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc -l -p <span class="m">1234</span> &lt; nc_pipe <span class="p">|</span> nc 127.0.0.1 <span class="m">5678</span> &gt; nc_pipe
</code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œä¸Šè¿°å‘½ä»¤ä¹‹åï¼Œå°±å¯ä»¥æŠŠæœ¬æœºçš„ 1235 ç«¯å£é‡å®šå‘åˆ°æœ¬æœºçš„ 5678 ç«¯å£ã€‚</p>
<h3 id="ä¼ è¾“æ–‡ä»¶">ä¼ è¾“æ–‡ä»¶</h3>
<p>ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œå‡è®¾ä½ æœ‰ä¸¤å°ä¸»æœº A ä¸ Bï¼Œä½ è¦æŠŠ A ä¸»æœºä¸Šçš„æ–‡ä»¶ file1 ä¼ è¾“åˆ° B ä¸»æœºä¸Šï¼Œä¿å­˜ä¸º file2</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">å…ˆåœ¨æ¥æ”¶ç«¯ B ä¸»æœºè¿è¡Œå¦‚ä¸‹å‘½ä»¤
nc -l -p port &gt; file2

ç„¶ååœ¨å‘é€ç«¯ A ä¸»æœºè¿è¡Œå¦‚ä¸‹å‘½ä»¤
nc ip port &lt; file1
</code></pre></td></tr></table>
</div>
</div><p>ä¸¤è€…ç«¯å£å·è¦ç›¸åŒ</p>
<h3 id="è¿œç¨‹å¤‡ä»½æ•´ä¸ªç£ç›˜">è¿œç¨‹å¤‡ä»½æ•´ä¸ªç£ç›˜</h3>
<p>å‡è®¾ä½ è¦æŠŠ A ä¸»æœº <code>/dev/sda</code> ç£ç›˜çš„åŸå§‹æ•°æ®æ•´ä¸ªå¤åˆ¶åˆ° B ä¸»æœºçš„ <code>/dev/sdb</code> ç£ç›˜ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">å…ˆåœ¨æ¥æ”¶ç«¯ï¼ˆB ä¸»æœºï¼‰è¿è¡Œå¦‚ä¸‹å‘½ä»¤
nc -lp port <span class="p">|</span> dd <span class="nv">of</span><span class="o">=</span>/dev/sdb

ç„¶ååœ¨å‘é€ç«¯ A ä¸»æœºè¿è¡Œå¦‚ä¸‹å‘½ä»¤
dd <span class="k">if</span><span class="o">=</span>/dev/sda <span class="p">|</span> nc ip port
</code></pre></td></tr></table>
</div>
</div><h3 id="è¿œç¨‹æ§åˆ¶">è¿œç¨‹æ§åˆ¶</h3>
<p>å°† A ä¸»æœºçš„ <code>bash</code> å‘ç»™ B ä¸»æœº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">A:
nc -lp port -c bash

B:
nc ip port
</code></pre></td></tr></table>
</div>
</div><h3 id="æµåª’ä½“æœåŠ¡">æµåª’ä½“æœåŠ¡</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">A:
cat test.mp4 <span class="p">|</span> nc -lp port

B:
nc -nv ip port <span class="p">|</span> mplayer -vo x11 -cache <span class="m">4000</span>
</code></pre></td></tr></table>
</div>
</div><p>A è®© test.MP4 è¿™ä¸ªæ–‡ä»¶æˆä¸º<code>æµ</code>çš„å½¢å¼å‘é€åˆ° Bï¼ŒB ç”¨ mplayer æ’­æ”¾ï¼Œæ¥æ”¶å¤šå°‘æ’­æ”¾å¤šå°‘ï¼ŒæŒ‡å®šç¼“å­˜ 4000bytesã€‚</p>
<h3 id="ä¿¡æ¯æ”¶é›†">ä¿¡æ¯æ”¶é›†</h3>
<p>æ”¶é›†ç›®æ ‡æœºä¸Šçš„è¿›ç¨‹ä¿¡æ¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">nc -l -p port &gt; ps.txt
å°†è¿œç¨‹å‘é€è¿‡æ¥çš„å†…å®¹ä¿å­˜åœ¨æœ¬åœ°

Ps aux <span class="p">|</span>nc -nv ip port -q <span class="m">1</span>
æ ‡å‡†è¾“å…¥å®Œæˆå delay ä¸€ç§’é’Ÿï¼Œä¼šå‘é€åˆ°ä¾¦å¬ç«¯

</code></pre></td></tr></table>
</div>
</div><h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>
<p>[1] <a href="https://man.openbsd.org/nc.1" target="_blank" rel="noopener noreferrer">netcat manual page</a></p>
</li>
<li>
<p>[2] <a href="https://program-think.blogspot.com/2019/09/Netcat-Tricks.html#head-15" target="_blank" rel="noopener noreferrer">æ‰«ç›² netcatï¼ˆç½‘çŒ«ï¼‰çš„ N ç§ç”¨æ³• â€”â€” ä» â€œç½‘ç»œè¯Šæ–­â€ åˆ° â€œç³»ç»Ÿå…¥ä¾µâ€</a></p>
</li>
<li>
<p>[3] <a href="https://www.jianshu.com/p/cb26a0f6c622" target="_blank" rel="noopener noreferrer">NetCat ä½¿ç”¨æŒ‡å—</a></p>
</li>
</ul>]]></description>
</item><item>
    <title>åˆ©ç”¨ Netlify æ­å»º Koodo Reader</title>
    <link>https://www.techkoala.top/reader/</link>
    <pubDate>Wed, 12 Aug 2020 11:22:58 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/reader/</guid>
    <description><![CDATA[<blockquote>
<p>æ­å»ºè‡ªå·±çš„åœ¨çº¿ EPUB é˜…è¯»å™¨</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-netlify">ä»€ä¹ˆæ˜¯ Netlify</h2>
<p>å¼•ç”¨ <a href="https://www.netlify.com/" target="_blank" rel="noopener noreferrer">Netlify å®˜ç½‘</a>çš„ä»‹ç»ï¼š</p>
<div class="details admonition quote open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-quote-right fa-fw"></i>å¼•ç”¨<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Netlify is a unified platform that automates your code to create high-performant, easily maintainable sites and web apps.</div>
        </div>
    </div>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>Netlify</code> æ˜¯ä¸€ä¸ªæä¾›é™æ€ç½‘ç«™æ‰˜ç®¡çš„æœåŠ¡ã€‚å®ƒæä¾› <code>CI</code> æœåŠ¡ï¼Œèƒ½å¤Ÿå°†æ‰˜ç®¡åœ¨ <code>GitHub</code>ï¼Œ<code>GitLab</code> ç­‰ç½‘ç«™ä¸Šä»£ç ç”Ÿæˆé™æ€ç½‘ç«™è¿›è¡Œå±•ç¤ºã€‚ç±»ä¼¼äº <code>Github Pages</code>ï¼Œä¸è¿‡åŠŸèƒ½æ›´åŠ ä¸°å¯Œã€‚</p>
<h2 id="koodo-reader">Koodo Reader</h2>
<p><code>Koodo Reader</code> æ˜¯ä¸€ä¸ªåŸºäº <code>React</code> å’Œ <code>Electron</code> å¼€å‘çš„ <code>Epub</code> é˜…è¯»å™¨ã€‚</p>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/koodo1.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/koodo1.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/koodo1.webp" data-sub-html="<h2>Koodo Reader é¦–é¡µ</h2>">
        
    </a><figcaption class="image-caption">Koodo Reader é¦–é¡µ</figcaption>
    </figure>
<p>æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<blockquote>
<p>ğŸ“ å¼ºå¤§ç¬”è®°å’Œç¿»è¯‘åŠŸèƒ½ï¼Œå­¦ä¹ äº‹åŠåŠŸå€</p>
<p>ğŸš© ä½¿ç”¨ä¹¦æ¶æ¥ä¸ºä½ çš„å›¾ä¹¦åˆ†ç±»</p>
<p>ğŸŒ æ”¯æŒ <strong>Windows</strong> ï¼Œ <strong>MacOS</strong> å’Œ <strong>ç½‘é¡µç‰ˆ</strong></p>
<p>ğŸ–¥ ç»‘å®š <strong>OneDrive</strong>ï¼Œ <strong>Google Drive</strong>ï¼Œ <strong>Dropbox</strong> ç­‰ç½‘ç›˜ï¼Œå®ç°æ•°æ®çš„å¤šç«¯åŒæ­¥</p>
<p>ğŸ’» æ‚¨æ‰€æœ‰çš„æ•°æ®éƒ½æ”¯æŒå¯¼å…¥å¯¼å‡º</p>
</blockquote>
<p>æ›´å¤šè¯¦æƒ…è¯·ç‚¹å‡» <a href="https://koodo.960960.xyz/" target="_blank" rel="noopener noreferrer">Koodo Reader å®˜ç½‘</a> æŸ¥çœ‹ã€‚</p>
<h2 id="æ­å»º">æ­å»º</h2>
<ol>
<li>é¦–å…ˆè¿›å…¥ <a href="https://www.netlify.com/" target="_blank" rel="noopener noreferrer">Netlify å®˜ç½‘</a>ï¼Œç‚¹å‡»æ³¨å†Œï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ç›´æ¥ä½¿ç”¨ <code>Github</code> ç™»å½•ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æ–¹å¼ã€‚</li>
</ol>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Sign_Up.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Sign_Up.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Sign_Up.webp" data-sub-html="<h2>Netlify æ³¨å†Œ</h2>">
        
    </a><figcaption class="image-caption">Netlify æ³¨å†Œ</figcaption>
    </figure>
<ol start="2">
<li>æ³¨å†Œç™»é™†åï¼Œè¿›å…¥é¦–é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„ <code>New Site from Git</code> ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç«™ç‚¹ã€‚</li>
</ol>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site.webp" data-sub-html="<h2>åˆ›å»ºæ–°ç«™ç‚¹</h2>">
        
    </a><figcaption class="image-caption">åˆ›å»ºæ–°ç«™ç‚¹</figcaption>
    </figure>
<ol start="3">
<li>æ¥ä¸‹æ¥ï¼Œç‚¹å‡»ä¸‹æ–¹çš„ <code>Github</code> è¿›è¡Œæˆæƒï¼Œè¿™é‡Œä¼šå¼¹å‡ºä¸€ä¸ªæ–°çš„çª—å£ï¼Œè®©ä½ æˆæƒ <code>Netlify</code> è®¿é—®ä½ çš„ <code>Github</code> è´¦æˆ·ï¼Œå®Œæˆæˆæƒåè¿›å»ä¸‹ä¸€æ­¥ã€‚</li>
</ol>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site_github.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site_github.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site_github.webp" data-sub-html="<h2>ä½¿ç”¨Github åˆ›å»ºæ–°ç«™ç‚¹</h2>">
        
    </a><figcaption class="image-caption">ä½¿ç”¨Github åˆ›å»ºæ–°ç«™ç‚¹</figcaption>
    </figure>
<ol start="4">
<li>è¿™ä¸€æ­¥ä¼šè®©ä½ é€‰æ‹©ä½ å°†ç”¨äºç”Ÿæˆç«™ç‚¹çš„åº“ï¼Œè¿™é‡Œæˆ‘å·²ç»æå‰ Fork <a href="https://github.com/troyeguo/koodo-reader" target="_blank" rel="noopener noreferrer">troyeguo çš„ Koodo Reader åº“</a>ï¼Œæ‰€ä»¥ç›´æ¥é€‰æ‹©å³å¯ã€‚</li>
</ol>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site_Auth.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site_Auth.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/New_site_Auth.webp" data-sub-html="<h2>é€‰æ‹©ç›¸åº”çš„ Repo</h2>">
        
    </a><figcaption class="image-caption">é€‰æ‹©ç›¸åº”çš„ Repo</figcaption>
    </figure>
<ol start="5">
<li>æ¥ç€ï¼Œé…ç½® <code>Build</code> é€‰é¡¹ã€‚åœ¨è¯¥é¡¹ç›®çš„éƒ¨ç½²ä¸­ï¼Œéœ€è¦ä¿®æ”¹ <code>Build name &gt; yarn build</code>ï¼Œ<code>Publish directory &gt; build/ </code>ï¼Œå…¶ä»–ä¿æŒé»˜è®¤å³å¯ã€‚ï¼ˆå¦‚æœé…ç½®å…¶ä»–é¡¹ç›®ï¼Œè¿™é‡Œçš„å‚æ•°å¯èƒ½ä¸åŒï¼Œè¯·å‚è€ƒå…·ä½“é¡¹ç›®çš„æŒ‡å¯¼è¯´æ˜ï¼‰</li>
</ol>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Site_Setting.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Site_Setting.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Site_Setting.webp" data-sub-html="<h2>é…ç½®</h2>">
        
    </a><figcaption class="image-caption">é…ç½®</figcaption>
    </figure>
<ol start="6">
<li>åˆ°è¿™é‡Œï¼Œå·²ç»å®Œæˆäº†æ•´ä¸ªéƒ¨ç½²å·¥ä½œï¼Œç­‰å¾… <code>Netlify</code> æ„å»ºå®Œæˆå³åˆ»ã€‚</li>
</ol>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Deploying.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Deploying.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Deploying.webp" data-sub-html="<h2>é…ç½®</h2>">
        
    </a><figcaption class="image-caption">é…ç½®</figcaption>
    </figure>
<ol start="7">
<li><code>Netlify</code> ä¼šç»™ä½ é»˜è®¤åˆ†é…ä¸€ä¸ªäºŒçº§åŸŸåç”¨äºè®¿é—®ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒè‡ªå®šä¹‰åŸŸåï¼Œè¿™é‡Œæˆ‘ç»‘å®šäº†è‡ªå·±åŸŸåã€‚é™¤äº†åœ¨æ­¤å¤„ç»‘å®šå¤–ï¼Œè¿˜éœ€è¦é…ç½® <code>DNS</code> ç­‰ç­‰ï¼Œè¿™ä¸ªè¯·è‡ªè¡Œå®Œæˆã€‚ï¼ˆç”±äºæ­å»ºåšå®¢æ—¶ï¼Œå·²ç»å®Œæˆäº†ç›¸åº”è®¾ç½®ï¼Œå› æ­¤ï¼Œæˆ‘ç›´æ¥åœ¨ <code>Cloudfalre</code> æ–°å»ºäº†ä¸€ä¸ª <code>CNAME</code> æŒ‡å‘ <code>Netlify</code> ç»™æˆ‘çš„åŸŸåå°±å¥½äº†ï¼‰</li>
</ol>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Domain_Setting.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Domain_Setting.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Web/Reader/Domain_Setting.webp" data-sub-html="<h2>é…ç½®</h2>">
        
    </a><figcaption class="image-caption">é…ç½®</figcaption>
    </figure>
<ol start="8">
<li>å¤§åŠŸå‘Šæˆï¼Œæ¥<a href="https://reader.techkoala.top/" target="_blank" rel="noopener noreferrer">è¿™é‡Œ</a>çœ‹çœ‹ä¹¦å§ã€‚</li>
</ol>
<h2 id="åç»­">åç»­</h2>
<p>å¦‚æœéœ€è¦å¯¹ç½‘ç«™è¿›è¡Œæ›´æ–°ï¼Œåªéœ€è¦å…³æ³¨ä½ çš„ <code>Github Repo</code> å³å¯ã€‚æ¯æ¬¡ commit ä¹‹åï¼Œ<code>Netlify</code> éƒ½ä¼šè‡ªåŠ¨æ‹‰å–æ›´æ–°å¹¶ç”Ÿæˆã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>[1] <a href="https://github.com/troyeguo/koodo-reader" target="_blank" rel="noopener noreferrer">koodo-reader</a></li>
</ul>]]></description>
</item><item>
    <title>ç½‘ç»œæµ‹è¯•å·¥å…·ï¼šiPerf</title>
    <link>https://www.techkoala.top/iperf/</link>
    <pubDate>Fri, 07 Aug 2020 17:45:55 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/iperf/</guid>
    <description><![CDATA[<blockquote>
<p>TCPã€UDP å’Œ SCTP çš„ç»ˆæé€Ÿåº¦æµ‹è¯•å·¥å…·</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-iperf">ä»€ä¹ˆæ˜¯ iPerf</h2>
<p>iPerf æ˜¯ä¸€ä¸ªç”¨äºæµ‹é‡ç½‘ç»œæœ€å¤§å¸¦å®½çš„å°å·¥å…·ã€‚iPerf å¯ä»¥æµ‹è¯•æœ€å¤§ TCP å’Œ UDP å¸¦å®½æ€§èƒ½ï¼Œå…·æœ‰å¤šç§å‚æ•°å’Œ UDP ç‰¹æ€§ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ï¼Œå¯ä»¥æŠ¥å‘Šå¸¦å®½ã€å»¶è¿ŸæŠ–åŠ¨å’Œæ•°æ®åŒ…ä¸¢å¤±ã€‚å¯¹äºæ¯ä¸ªæµ‹è¯•ï¼Œå®ƒéƒ½ä¼šæŠ¥å‘Šå¸¦å®½ï¼Œä¸¢åŒ…å’Œå…¶ä»–å‚æ•°ã€‚</p>
<p>ç°åœ¨çš„ç‰ˆæœ¬ä¹Ÿç§° iPerf3ï¼Œè¿™æ˜¯å¯¹ NLANR/DAST å¼€å‘çš„åŸå§‹ç‰ˆæœ¬çš„é‡æ–°è®¾è®¡ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šiPerf3 ä¸æ­¤å‰ç‰ˆæœ¬çš„ iPerf ä¸å…¼å®¹ã€‚</p>
<h2 id="å®‰è£…-iperf">å®‰è£… iPerf</h2>
<p>iPerf3 å®˜æ–¹ä»…æ”¯æŒ CentOS Linuxï¼ŒFreeBSD å’Œ macOSï¼Œä½†å®é™…ä¸Šï¼Œ<a href="https://iperf.fr/iperf-download.php" target="_blank" rel="noopener noreferrer">å®˜ç½‘</a>æä¾›äº†ä¸»æµç³»ç»Ÿçš„é¢„ç¼–è¯‘æ–‡ä»¶ã€‚ï¼ˆåŒ…æ‹¬ Windowsã€Androidã€iOSã€Ubuntuã€Arch Linux ç­‰ï¼‰</p>
<p>ç±» UNIX ç³»ç»Ÿç›´æ¥ä½¿ç”¨åŒ…ç®¡ç†è¿›è¡Œå®‰è£…å³å¯ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo apt install iperf3
</code></pre></td></tr></table>
</div>
</div><h2 id="ä½¿ç”¨-iperf">ä½¿ç”¨ iPerf</h2>
<p>é¦–å…ˆï¼Œä»‹ç»æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å…±æœ‰çš„å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">-p, --port n      æœåŠ¡å™¨ç”¨äºä¾¦å¬å’Œå®¢æˆ·ç«¯è¿æ¥çš„æœåŠ¡å™¨ç«¯å£ï¼Œä¸¤è€…åº”è¯¥ç›¸åŒï¼Œé»˜è®¤å€¼ä¸º <span class="m">5201</span>
--cport n         æŒ‡å®šå®¢æˆ·ç«¯ç«¯å£
-f, --format      ç”¨äºæŒ‡å®šå•ä½æ˜¾ç¤ºæ ¼å¼ï¼Œæ”¯æŒ <span class="s1">&#39;k&#39;</span> <span class="o">=</span> Kbits/sec <span class="s1">&#39;K&#39;</span> <span class="o">=</span> KBytes/sec <span class="s1">&#39;m&#39;</span> <span class="o">=</span> Mbits/sec <span class="s1">&#39;M&#39;</span> <span class="o">=</span> MBytes/secï¼Œé»˜è®¤ä¸ºè‡ªé€‚åº”æ ¼å¼
-i, --interval n  è®¾ç½®æµ‹è¯•ä¿¡æ¯æŠ¥å‘Šä¹‹é—´çš„é—´éš”æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚å¦‚æœä¸ºé›¶ï¼Œåˆ™ä¸æ‰“å°ä»»ä½•å®šæœŸæŠ¥å‘Šã€‚é»˜è®¤å€¼ä¸ºé›¶ã€‚
-F, --file name   å®¢æˆ·ç«¯ï¼šä»æ–‡ä»¶è¯»å–å¹¶å†™å…¥ç½‘ç»œï¼Œè€Œä¸æ˜¯ä½¿ç”¨éšæœºæ•°æ®ï¼›æœåŠ¡å™¨ç«¯ï¼šä»ç½‘ç»œè¯»å–å¹¶å†™å…¥æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸¢å¼ƒæ•°æ®ã€‚
-A, --affinity    å¦‚æœå¯ä»¥ï¼Œè®¾ç½® CPU å…³è”ï¼ˆä»…é™ Linux å’Œ FreeBSDï¼‰ã€‚
-B, --bind host   ç»‘å®šåˆ°ä¸»æœºã€‚å¯¹äºå®¢æˆ·ç«¯ï¼Œè¿™å°†è®¾ç½®å‡ºç«™æ¥å£ã€‚å¯¹äºæœåŠ¡å™¨ï¼Œè¿™å°†è®¾ç½®ä¼ å…¥æ¥å£ã€‚è¿™åªé€‚ç”¨äºå…·æœ‰å¤šä¸ªç½‘ç»œæ¥å£çš„å¤šå®¿ä¸»ä¸»æœºã€‚
-V, --verbose     æä¾›æ›´è¯¦ç»†çš„è¾“å‡º
-J, --json        ä»¥ JSON æ ¼å¼è¾“å‡º
--logfile file    è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶
--d, --debug      å‘å‡ºè°ƒè¯•è¾“å‡º
-v, --version     è¾“å‡ºç‰ˆæœ¬ä¿¡æ¯
-h, --help        è¾“å‡ºå¸®åŠ©ä¿¡æ¯
</code></pre></td></tr></table>
</div>
</div><p>æœåŠ¡ç«¯ç‰¹æœ‰å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">-s, --server      åœ¨æœåŠ¡å™¨æ¨¡å¼ä¸‹è¿è¡Œ iPerfï¼ˆä¸€æ¬¡åªå…è®¸ä¸€ä¸ª iPerf è¿æ¥ï¼‰
-D, --daemon      å°†æœåŠ¡å™¨ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹åœ¨åå°è¿è¡Œ
-I, --pidfilefile ä½¿ç”¨è¿›ç¨‹IDç¼–å†™æ–‡ä»¶ï¼Œè¿™åœ¨ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œæ—¶éå¸¸æœ‰ç”¨
</code></pre></td></tr></table>
</div>
</div><p>å®¢æˆ·ç«¯ç‰¹æœ‰å‚æ•°:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">-c, --client host	    åœ¨å®¢æˆ·ç«¯æ¨¡å¼ä¸‹è¿è¡Œ iPerf
--sctp	                ä½¿ç”¨ SCTP è€Œä¸æ˜¯ TCP
-u, --udp	            ä½¿ç”¨ UDP è€Œä¸æ˜¯ TCP
-b, --bandwidth      	å°†ç›®æ ‡å¸¦å®½è®¾ç½®ä¸º nbits/secï¼ˆå¯¹äº UDP é»˜è®¤ä¸º <span class="m">1</span> Mbit/secï¼Œå¯¹äº TCP ä¸ºæ— é™åˆ¶ï¼‰ã€‚å¦‚æœæœ‰å¤šä¸ªæµï¼ˆ-P æ ‡å¿—ï¼‰ï¼Œåˆ™å¸¦å®½é™åˆ¶å°†åˆ†åˆ«åº”ç”¨äºæ¯ä¸ªæµã€‚æ‚¨è¿˜å¯ä»¥åœ¨å¸¦å®½è¯´æ˜ç¬¦ä¸­æ·»åŠ ä¸€ä¸ª â€œ/â€ å’Œä¸€ä¸ªæ•°å­—ã€‚è¿™ç§°ä¸º â€œçªå‘æ¨¡å¼â€ã€‚ å®ƒä¼šå‘é€ç»™å®šæ•°é‡çš„æ•°æ®åŒ…è€Œä¸ä¼šæš‚åœï¼Œå³ä½¿è¯¥æ•°æ®åŒ…æš‚æ—¶è¶…è¿‡äº†æŒ‡å®šçš„å¸¦å®½é™åˆ¶
-t, --time  	        ä¼ è¾“çš„æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚iPerf é€šå¸¸é€šè¿‡åœ¨ t æ—¶é—´å†…é‡å¤å‘é€ len é•¿åº¦çš„å­—èŠ‚æ•°ç»„æ¥å·¥ä½œã€‚é»˜è®¤å€¼ä¸º <span class="m">10</span> ç§’
-n, --num 	            è¦ä¼ è¾“çš„ç¼“å†²åŒºæ•°é‡ã€‚é€šå¸¸ï¼ŒiPerf åªä¼šå‘é€ <span class="m">10</span> ç§’ã€‚-n é€‰é¡¹è¦†ç›–æ­¤è®¾ç½®ï¼Œå¹¶å‘é€ len é•¿åº¦å­—èŠ‚æ•°ç»„ n æ¬¡ï¼Œæ— è®ºéœ€è¦å¤šé•¿æ—¶é—´
-k, --blockcount    	è¦ä¼ è¾“çš„å—ï¼ˆæ•°æ®åŒ…ï¼‰æ•°
-l, --length     	    è¯»å–æˆ–å†™å…¥çš„ç¼“å†²åŒºçš„é•¿åº¦ï¼ŒiPerf é€šè¿‡å¤šæ¬¡å†™å…¥ len ä¸ªå­—èŠ‚çš„æ•°ç»„æ¥å·¥ä½œã€‚TCP çš„é»˜è®¤å€¼ä¸º <span class="m">128</span> KBï¼ŒUDP çš„é»˜è®¤å€¼ä¸º <span class="m">8</span> KBã€‚
-P, --parallel  	    ä¸æœåŠ¡å™¨åŒæ—¶å»ºç«‹çš„è¿æ¥æ•°ï¼Œé»˜è®¤å€¼ä¸º <span class="m">1</span>
-R, --reverse	        ä»¥åå‘æ¨¡å¼è¿è¡Œï¼ˆæœåŠ¡å™¨å‘é€ï¼Œå®¢æˆ·ç«¯æ¥æ”¶ï¼‰
-w, --window    	    å°†å¥—æ¥å­—ç¼“å†²åŒºå¤§å°è®¾ç½®ä¸ºæŒ‡å®šå€¼ã€‚å¯¹äº TCPï¼Œè¿™å°†è®¾ç½® TCP çª—å£å¤§å°ï¼ˆè¿™å°†å‘é€åˆ°æœåŠ¡å™¨å¹¶åœ¨è¯¥ä¾§ä½¿ç”¨ï¼‰
-M, --set-mss  	        å°è¯•è®¾ç½® TCP æœ€å¤§æ®µå¤§å°ï¼ˆMSSï¼‰ã€‚MSS é€šå¸¸æ˜¯ MTU-TCP/IP æ ‡å¤´çš„ <span class="m">40</span> ä¸ªå­—èŠ‚ã€‚å¯¹äºä»¥å¤ªç½‘ï¼ŒMSS ä¸º <span class="m">1460</span> å­—èŠ‚ï¼ˆ1500 å­—èŠ‚ MTUï¼‰
-N, --no-delay	        è®¾ç½® â€œTCP no delayâ€ é€‰é¡¹ï¼Œç¦ç”¨ Nagle çš„ç®—æ³•ã€‚é€šå¸¸ï¼Œä»…å¯¹äº¤äº’å¼åº”ç”¨ç¨‹åºï¼ˆå¦‚ telnetï¼‰ç¦ç”¨æ­¤åŠŸèƒ½
-4, --version4	        ä»…ä½¿ç”¨ IPv4.
-6, --version4	        ä»…ä½¿ç”¨ IPv6.
-S, --tos               ä¼ å‡ºæ•°æ®åŒ…çš„æœåŠ¡ç±»å‹ã€‚<span class="o">(</span>è®¸å¤šè·¯ç”±å™¨ä¼šå¿½ç•¥TOSå­—æ®µã€‚ï¼‰å¯ä»¥ä½¿ç”¨åå…­è¿›åˆ¶å€¼ï¼ˆ0xï¼‰ä½œä¸ºå‰ç¼€ï¼Œä½¿ç”¨å…«è¿›åˆ¶æ•°ï¼ˆ0ï¼‰ä½œä¸ºå‰ç¼€ï¼Œæˆ–è€…ä½¿ç”¨åè¿›åˆ¶æ¥æŒ‡å®šå€¼ã€‚ ä¾‹å¦‚ï¼Œ<span class="s1">&#39;0x10&#39;</span><span class="nv">åå…­è¿›åˆ¶</span><span class="o">=</span><span class="s1">&#39;020&#39;</span><span class="nv">å…«è¿›åˆ¶</span><span class="o">=</span><span class="s1">&#39;16&#39;</span>åè¿›åˆ¶ã€‚RFC 1349ä¸­æŒ‡å®šçš„TOSç¼–å·ä¸ºï¼š
                        IPTOS_LOWDELAY     minimize delay        0x10
                        IPTOS_THROUGHPUT   maximize throughput   0x08
                        IPTOS_RELIABILITY  maximize reliability  0x04
                        IPTOS_LOWCOST      minimize cost         0x02
-L, --flowlabel  	    è®¾ç½® IPv6 æµæ ‡ç­¾ï¼ˆå½“å‰ä»…åœ¨ Linux ä¸Šå—æ”¯æŒï¼‰
-Z, --zerocopy	        ä½¿ç”¨ â€œé›¶æ‹·è´â€ æ–¹æ³•å‘é€æ•°æ®ï¼Œå¦‚ sendfileï¼ˆ2ï¼‰ï¼Œè€Œä¸æ˜¯é€šå¸¸çš„ writeï¼ˆ2ï¼‰ã€‚è¿™æ ·å¯ä»¥å ç”¨æ›´å°‘çš„ CPU
-O, --omit  	        çœç•¥æµ‹è¯•çš„å‰ n ç§’ï¼Œä»¥è·³è¿‡ TCP TCP æ…¢å¯åŠ¨å‘¨æœŸ
-T, --title             ä¸ºæ¯ä¸ªè¾“å‡ºè¡Œæ·»åŠ æ­¤å­—ç¬¦ä¸²å‰ç¼€
-C, --linux-congestion  è®¾ç½®æ‹¥å¡æ§åˆ¶ç®—æ³• <span class="o">(</span>ä»…é€‚ç”¨äº iPerf 3.1 çš„ Linux å’Œ FreeBSD<span class="o">)</span>ã€‚
</code></pre></td></tr></table>
</div>
</div><div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>æ³¨æ„<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">ä»å®¢æˆ·ç«¯ä¸“æœ‰é€‰é¡¹å¯ä»¥çœ‹å‡ºï¼ŒiPerf é»˜è®¤æµ‹è¯•çš„æ˜¯ä»å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡ç«¯ï¼Œç›¸å¯¹äºå®¢æˆ·ç«¯æ¥è¯´ï¼Œæµ‹è¯•å°±æ˜¯ä¸Šè¡Œé“¾è·¯çš„å¸¦å®½ï¼Œå¯¹äºä¸€èˆ¬å‚è€ƒæ„ä¹‰æ›´å¤§çš„ä¸‹è¡Œé“¾è·¯éœ€è¦åŠ ä¸Š <code>-R</code> é€‰é¡¹ã€‚</div>
        </div>
    </div>
<p>å¸¸ç”¨å¯ç”¨å‚æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">æœåŠ¡ç«¯
$ iperf3 -s -p <span class="m">12345</span> -i <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">å®¢æˆ·ç«¯
$ iperf3 -c 192.168.1.43 -p <span class="m">12345</span> -i <span class="m">1</span> -t <span class="m">20</span> -w 100k
</code></pre></td></tr></table>
</div>
</div><figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Network/iperf/iperf.webp" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Network/iperf/iperf.webp" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Network/iperf/iperf.webp" data-sub-html="<h2>iPerf ä½¿ç”¨å®ä¾‹</h2>">
        
    </a><figcaption class="image-caption">iPerf ä½¿ç”¨å®ä¾‹</figcaption>
    </figure>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>
<p>[1] <a href="https://iperf.fr/iperf-doc.php" target="_blank" rel="noopener noreferrer">iPerf user docs</a></p>
</li>
<li>
<p>[2] <a href="https://github.com/esnet/iperf" target="_blank" rel="noopener noreferrer">iPerf Github</a></p>
</li>
</ul>]]></description>
</item><item>
    <title>æ–‡ä»¶ä¼ è¾“ç³»åˆ—ï¼šSFTP</title>
    <link>https://www.techkoala.top/sftp/</link>
    <pubDate>Thu, 06 Aug 2020 14:07:53 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/sftp/</guid>
    <description><![CDATA[<blockquote>
<p>SCP çš„ç»§æ‰¿è€…</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-sftp">ä»€ä¹ˆæ˜¯ SFTP</h2>
<p>é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼ŒSFTPï¼ˆSSH File Transfer Protocolï¼‰ä¸æ˜¯è¿è¡Œåœ¨ SSH ä¸Šçš„ FTPï¼Œè€Œæ˜¯ç”± IETFï¼ˆInternet Engineering Task Forceï¼‰å·¥ä½œç»„è®¾è®¡çš„æ–°åè®®ï¼Œå°†å…¶ä½œä¸º SSH 2.0 ç‰ˆçš„æ‰©å±•ï¼Œæä¾›å®‰å…¨çš„æ–‡ä»¶ä¼ è¾“åŠŸèƒ½ã€‚å› æ­¤ï¼Œæ²¡æœ‰å•ç‹¬çš„ SFTP ç«¯å£ï¼Œè€Œæ˜¯ä½¿ç”¨æ™®é€šçš„ SSH ç«¯å£ã€‚åè®®æœ¬èº«ä¸æä¾›èº«ä»½éªŒè¯å’Œå®‰å…¨æ€§ï¼Œè€Œæ˜¯æœŸæœ›åº•å±‚åè®®æä¾›ã€‚</p>
<p>ä¸ä»…å…è®¸æ–‡ä»¶ä¼ è¾“çš„ SCP åè®®ç›¸æ¯”ï¼ŒSFTP åè®®å…è®¸å¯¹è¿œç¨‹æ–‡ä»¶è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œè¿™ä½¿å…¶æ›´åƒè¿œç¨‹æ–‡ä»¶ç³»ç»Ÿåè®®ã€‚SFTP å®¢æˆ·ç«¯è¿˜æ”¯æŒåŒ…æ‹¬æ¢å¤ä¸­æ–­çš„ä¼ è¾“ï¼Œç›®å½•åˆ—è¡¨å’Œè¿œç¨‹æ–‡ä»¶åˆ é™¤ç­‰åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥ä¸å®ƒä»¬çš„åŸºæœ¬å±æ€§ç›¸å…³è”ï¼Œä¾‹å¦‚æ—¶é—´æˆ³ã€‚ç›¸æ¯”æ™®é€š FTP åè®®ï¼Œè¿™æ˜¯ä¸€é¡¹ä¼˜åŠ¿ã€‚</p>
<p>å°½ç®¡ SFTP æœ€å¸¸åœ¨ Unix å¹³å°ä¸Šå®ç°ï¼Œä½† SFTP åœ¨ä¸»æµå¹³å°éƒ½å¯ç”¨ã€‚</p>
<div class="details admonition quote open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-quote-right fa-fw"></i>å¼•ç”¨<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">æœ‰å…³ SFTP è¯¦ç»†è‰æ¡ˆå‚è§ <a href="https://assets.ctfassets.net/0lvk5dbamxpi/6jBxT5LDgMqutNK4mPTGKd/4fa27cb4a130bca3b48a10c9045b0497/draft-ietf-secsh-filexfer-02" target="_blank" rel="noopener noreferrer">draft-ietf-secsh-filexfer-02</a></div>
        </div>
    </div>
<h2 id="ä½¿ç”¨-sftp">ä½¿ç”¨ SFTP</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sftp é€‰é¡¹ å‚æ•°
</code></pre></td></tr></table>
</div>
</div><h3 id="é€‰é¡¹">é€‰é¡¹</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">-Bï¼šæŒ‡å®šä¼ è¾“æ–‡ä»¶æ—¶ç¼“å†²åŒºçš„å¤§å°ï¼›
-lï¼šä½¿ç”¨ ssh åè®®ç‰ˆæœ¬ 1ï¼›
-bï¼šæŒ‡å®šæ‰¹å¤„ç†æ–‡ä»¶ï¼›
-Cï¼šä½¿ç”¨å‹ç¼©ï¼›
-oï¼šæŒ‡å®š ssh é€‰é¡¹ï¼›
-Fï¼šæŒ‡å®š ssh é…ç½®æ–‡ä»¶ï¼›
-Rï¼šæŒ‡å®šä¸€æ¬¡å¯ä»¥å®¹å¿å¤šå°‘è¯·æ±‚æ•°ï¼›
-vï¼šå‡é«˜æ—¥å¿—ç­‰çº§ã€‚
</code></pre></td></tr></table>
</div>
</div><h3 id="å‚æ•°">å‚æ•°</h3>
<p>ç›®æ ‡ä¸»æœºï¼šæŒ‡å®š SFTP æœåŠ¡å™¨ IP åœ°å€æˆ–è€…ä¸»æœºåã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>
<p>[1] <a href="https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol" target="_blank" rel="noopener noreferrer">SSH File Transfer Protocol</a></p>
</li>
<li>
<p>[2] <a href="https://jaywcjlove.gitee.io/linux-command/c/sftp.html" target="_blank" rel="noopener noreferrer">SFTP Command</a></p>
</li>
</ul>]]></description>
</item><item>
    <title>æ–‡ä»¶ä¼ è¾“ç³»åˆ—ï¼šrsync</title>
    <link>https://www.techkoala.top/rsync/</link>
    <pubDate>Wed, 05 Aug 2020 20:58:00 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/rsync/</guid>
    <description><![CDATA[<blockquote>
<p>SCP çš„å¦ä¸€ä¸ªç»ä½³æ›¿é€‰</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-rsync">ä»€ä¹ˆæ˜¯ rsync</h2>
<p>rsync (remote synchronize) æ˜¯ä¸€æ¬¾å®ç°è¿œç¨‹åŒæ­¥åŠŸèƒ½çš„è½¯ä»¶ï¼Œå®ƒåœ¨åŒæ­¥æ–‡ä»¶çš„åŒæ—¶ï¼Œå¯ä»¥ä¿æŒåŸæ¥æ–‡ä»¶çš„æƒé™ã€æ—¶é—´ã€è½¯ç¡¬é“¾æ¥ç­‰é™„åŠ ä¿¡æ¯ã€‚</p>
<p>rsync æ˜¯<code>ç±» Unix</code> ç³»ç»Ÿä¸‹çš„æ•°æ®é•œåƒå¤‡ä»½å·¥å…·ã€‚å®ƒèƒ½åŒæ­¥æ›´æ–°ä¸¤å¤„è®¡ç®—æœºçš„æ–‡ä»¶ä¸ç›®å½•ï¼Œå¹¶é€‚å½“åˆ©ç”¨å·®åˆ†ç¼–ç ä»¥å‡å°‘æ•°æ®ä¼ è¾“é‡ã€‚ rsync ä¸­çš„ä¸€é¡¹åŒç±»è½¯ä»¶ä¸å¸¸è§çš„é‡è¦ç‰¹æ€§æ˜¯æ¯ä¸ªç›®æ ‡çš„é•œåƒåªéœ€å‘é€ä¸€æ¬¡ã€‚rsync å¯ä»¥æ‹·è´ï¼æ˜¾ç¤ºç›®å½•å†…å®¹ï¼Œä»¥åŠæ‹·è´æ–‡ä»¶ï¼Œå¹¶å¯é€‰å‹ç¼©ä»¥åŠé€’å½’æ‹·è´ã€‚</p>
<p>rsync é»˜è®¤ç›‘å¬ <code>TCP</code> ç«¯å£ 873ï¼Œä»¥åŸç”Ÿ rsync ä¼ è¾“åè®®æˆ–è€…é€è¿‡<code>è¿œç¨‹ shell</code> å¦‚ <code>RSH</code> æˆ–è€… <code>SSH</code> æä¾›æ–‡ä»¶ã€‚<code>SSH</code> æ¨¡å¼ä¸‹ï¼Œrsync å®¢æˆ·ç«¯è¿è¡Œç¨‹åºå¿…é¡»åŒæ—¶åœ¨æœ¬åœ°å’Œè¿œç¨‹æœºå™¨ä¸Šå®‰è£…ã€‚</p>
<h2 id="rsync-ç®—æ³•">rsync ç®—æ³•</h2>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>ä¿¡æ¯<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">æ­¤éƒ¨åˆ†å†…å®¹è½¬è½½ <a href="https://coolshell.cn/articles/7425.html" target="_blank" rel="noopener noreferrer">RSYNC çš„æ ¸å¿ƒç®—æ³•</a></div>
        </div>
    </div>
<p>rsync çš„ç®—æ³•å¦‚ä¸‹ï¼šï¼ˆå‡è®¾æºæ–‡ä»¶åä¸º <code>fileSrc</code>ï¼Œç›®çš„æ–‡ä»¶å« <code>fileDst</code>ï¼‰</p>
<h3 id="åˆ†å—-checksum-ç®—æ³•">åˆ†å— Checksum ç®—æ³•</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šæŠŠ <code>fileDst</code> çš„æ–‡ä»¶å¹³å‡åˆ‡åˆ†æˆè‹¥å¹²ä¸ªå°å—ï¼Œæ¯”å¦‚æ¯å— 512 ä¸ªå­—èŠ‚ï¼Œç„¶åå¯¹<strong>æ¯å—</strong>è®¡ç®—<strong>ä¸¤ä¸ª</strong> <code>checksum</code>ï¼Œä¸€ä¸ªå« <code>rolling checksum</code>ï¼Œæ˜¯<code>å¼± checksum</code>ï¼Œ32 ä½çš„ <code>checksum</code>ï¼Œå…¶ä½¿ç”¨çš„æ˜¯ Mark Adler å‘æ˜çš„ <code>adler-32</code> ç®—æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯<code>å¼º checksum</code>ï¼Œ128 ä½çš„ï¼Œä»¥å‰ç”¨ <code>md4</code>ï¼Œç°åœ¨ç”¨ <code>md5</code>ã€‚ä¸ºä»€ä¹ˆè¦è¿™æ ·ï¼Ÿå› ä¸ºè‹¥å¹²å¹´å‰çš„ç¡¬ä»¶ä¸Šè·‘ <code>md4</code> çš„ç®—æ³•å¤ªæ…¢äº†ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä¸€ä¸ªå¿«ç®—æ³•æ¥é‰´åˆ«æ–‡ä»¶å—çš„ä¸åŒï¼Œä½†æ˜¯å¼±çš„ <code>adler-32</code> ç®—æ³•ç¢°æ’æ¦‚ç‡å¤ªé«˜äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦å¼•å…¥å¼ºçš„ <code>checksum</code> ç®—æ³•ä»¥ä¿è¯ä¸¤æ–‡ä»¶å—æ˜¯ç›¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¼±çš„ <code>checksum</code> æ˜¯ç”¨æ¥åŒºåˆ«ä¸åŒï¼Œè€Œå¼ºçš„æ˜¯ç”¨æ¥ç¡®è®¤ç›¸åŒã€‚</p>
<h3 id="ä¼ è¾“ç®—æ³•">ä¼ è¾“ç®—æ³•</h3>
<p>åŒæ­¥ç›®æ ‡ç«¯ä¼šæŠŠ <code>fileDst</code> çš„ä¸€ä¸ª <code>checksum</code> åˆ—è¡¨ä¼ ç»™åŒæ­¥æºï¼Œè¿™ä¸ªåˆ—è¡¨é‡ŒåŒ…æ‹¬äº†ä¸‰ä¸ªä¸œè¥¿ï¼Œ<code>rolling checksum</code> (32bits)ï¼Œ<code>md5 checksume</code> (128bits)ï¼Œ<code>æ–‡ä»¶å—ç¼–å·</code>ã€‚åŒæ­¥æºæœºå™¨æ‹¿åˆ°äº†è¿™ä¸ªåˆ—è¡¨åï¼Œä¼šå¯¹ <code>fileSrc</code> åšåŒæ ·çš„ <code>checksum</code>ï¼Œç„¶åå’Œ <code>fileDst</code> çš„ <code>checksum</code> åšå¯¹æ¯”ï¼Œè¿™æ ·å°±çŸ¥é“å“ªäº›æ–‡ä»¶å—æ”¹å˜äº†ã€‚</p>
<p><strong>ä½†æ˜¯</strong></p>
<p>å¦‚æœæˆ‘ <code>fileSrc</code> è¿™è¾¹åœ¨æ–‡ä»¶ä¸­é—´åŠ äº†ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·åé¢çš„æ–‡ä»¶å—éƒ½ä¼šä½ç§»ä¸€ä¸ªå­—ç¬¦ï¼Œè¿™æ ·å°±å®Œå…¨å’Œ <code>fileDst</code> è¿™è¾¹çš„ä¸ä¸€æ ·äº†ï¼Œä½†ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘åº”è¯¥åªéœ€è¦ä¼ ä¸€ä¸ªå­—ç¬¦å°±å¥½äº†ã€‚è¿™ä¸ªæ€ä¹ˆè§£å†³ï¼Ÿ
å¦‚æœè¿™ä¸ª <code>checksum</code> åˆ—è¡¨ç‰¹åˆ«é•¿ï¼Œè€Œä¸¤è¾¹ç›¸åŒçš„æ–‡ä»¶å—å¯èƒ½å¹¶ä¸æ˜¯ä¸€æ ·çš„é¡ºåºï¼Œé‚£å°±éœ€è¦æŸ¥æ‰¾ï¼Œçº¿æ€§çš„æŸ¥æ‰¾èµ·æ¥åº”è¯¥ç‰¹åˆ«æ…¢å§ã€‚è¿™ä¸ªæ€ä¹ˆè§£å†³ï¼Ÿ</p>
<h3 id="checksum-æŸ¥æ‰¾ç®—æ³•">Checksum æŸ¥æ‰¾ç®—æ³•</h3>
<p>åŒæ­¥æºç«¯æ‹¿åˆ° <code>fileDst</code> çš„ <code>checksum</code> æ•°ç»„åï¼Œä¼šæŠŠè¿™ä¸ªæ•°æ®å­˜åˆ°ä¸€ä¸ª <code>hash table</code> ä¸­ï¼Œç”¨ <code>rolling checksum</code> åš <code>hash</code>ï¼Œä»¥ä¾¿è·å¾— <code>O(1)</code> æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾æ€§èƒ½ã€‚è¿™ä¸ª <code>hash table</code> æ˜¯ 16 bits çš„ï¼Œæ‰€ä»¥ï¼Œ<code>hash table</code> çš„å°ºå¯¸æ˜¯ 2 çš„ 16 æ¬¡æ–¹ï¼Œå¯¹ <code>rolling checksum</code> çš„ <code>hash</code> ä¼šè¢«æ•£åˆ—åˆ° 0 åˆ° $ 2^{16} â€“ 1 $ ä¸­çš„æŸä¸ªæ•´æ•°å€¼ã€‚</p>
<h3 id="æ¯”å¯¹ç®—æ³•">æ¯”å¯¹ç®—æ³•</h3>
<ol>
<li>
<p>å– <code>fileSrc</code> çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶å—ï¼ˆæˆ‘ä»¬å‡è®¾çš„æ˜¯ 512 ä¸ªé•¿åº¦ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä» <code>fileSrc</code> çš„ç¬¬ 1 ä¸ªå­—èŠ‚åˆ°ç¬¬ 512 ä¸ªå­—èŠ‚ï¼Œå–å‡ºæ¥ååš <code>rolling checksum</code> è®¡ç®—ã€‚è®¡ç®—å¥½çš„å€¼åˆ° <code>hash</code> è¡¨ä¸­æŸ¥è¯¢ã€‚</p>
</li>
<li>
<p>å¦‚æœæŸ¥åˆ°äº†ï¼Œè¯´æ˜å‘ç°åœ¨ <code>fileDst</code> ä¸­æœ‰æ½œåœ¨ç›¸åŒçš„æ–‡ä»¶å—ï¼Œäºæ˜¯å°±å†æ¯”è¾ƒ Â· çš„ <code>checksum</code>ï¼Œå› ä¸º <code>rolling checksume</code> å¤ªå¼±äº†ï¼Œå¯èƒ½å‘ç”Ÿç¢°æ’ã€‚äºæ˜¯è¿˜è¦ç®— <code>md5</code> çš„ 128 bits çš„ <code>checksum</code>ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±æœ‰ $2^{-(32+128)} = 2^{-160} $ çš„æ¦‚ç‡å‘ç”Ÿç¢°æ’ï¼Œè¿™å°åˆ°å¯ä»¥å¿½ç•¥ã€‚å¦‚æœ <code>rolling checksum</code> å’Œ <code>md5 checksum</code> éƒ½ç›¸åŒï¼Œé‚£å°±å¯ä»¥è¯´æ˜åœ¨ <code>fileDst</code> ä¸­æœ‰ç›¸åŒçš„å—ï¼Œè®°ä¸‹è¿™ä¸€å—åœ¨ <code>fileDst</code> ä¸‹çš„æ–‡ä»¶ç¼–å·ã€‚</p>
</li>
<li>
<p>å¦‚æœ <code>fileSrc</code> çš„ <code>rolling checksum</code> æ²¡æœ‰åœ¨ <code>hash table</code> ä¸­æ‰¾åˆ°ï¼Œé‚£å°±ä¸ç”¨ç®— <code>md5 checksum</code> äº†ã€‚è¡¨ç¤ºè¿™ä¸€å—ä¸­æœ‰ä¸åŒçš„ä¿¡æ¯ã€‚æ€»ä¹‹ï¼Œåªè¦ <code>rolling checksum</code> æˆ– <code>md5 checksum</code> å…¶ä¸­æœ‰ä¸€ä¸ªåœ¨ <code>fileDst</code> çš„ <code>checksum hash</code> è¡¨ä¸­æ‰¾ä¸åˆ°åŒ¹é…é¡¹ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘ç®—æ³•å¯¹ <code>fileSrc</code> çš„ rolling åŠ¨ä½œã€‚äºæ˜¯ï¼Œç®—æ³•ä¼šä½å step 1 ä¸ªå­—èŠ‚ï¼Œå– <code>fileSrc</code> ä¸­å­—èŠ‚ 2-513 çš„æ–‡ä»¶å—è¦åš <code>checksum</code>ï¼Œç„¶åç»§ç»­ç¬¬ä¸€æ­¥ â€“ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå« <code>rolling checksum</code> ã€‚</p>
</li>
<li>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰¾å‡º <code>fileSrc</code> ç›¸é‚»ä¸¤æ¬¡åŒ¹é…ä¸­çš„é‚£äº›æ–‡æœ¬å­—ç¬¦ï¼Œè¿™äº›å°±æ˜¯æˆ‘ä»¬è¦å¾€åŒæ­¥ç›®æ ‡ç«¯ä¼ çš„æ–‡ä»¶å†…å®¹äº†ã€‚</p>
</li>
</ol>
<h2 id="rolling-checksum-ç®—æ³•">Rolling Checksum ç®—æ³•</h2>
<p>rolling checksum ç®—æ³•ä¹Ÿå« <code>Rabin-Karp</code> ç®—æ³•ï¼Œç”± Richard M. Karp å’Œ Michael O. Rabin åœ¨ 1987 å¹´å‘è¡¨ï¼Œå®ƒç”¨æ¥è§£å†³å¤šæ¨¡å¼ä¸²åŒ¹é…é—®é¢˜ã€‚å…¶æœ€å¤§çš„ç²¾é«“æ˜¯ï¼Œå½“å¾€åé¢ step 1 ä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œä¸ç”¨å…¨éƒ¨é‡æ–°è®¡ç®—æ‰€æœ‰çš„ <code>checksum</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä» [0, 512] rolling åˆ° [1, 513] æ—¶ï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—ä» 1 åˆ° 513 çš„ <code>checksum</code>ï¼Œè€Œæ˜¯é‡ç”¨ [0ï¼Œ512] çš„ <code>checksum</code> ç›´æ¥ç®—å‡ºæ¥ã€‚</p>
<p>å…¶å…¬å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hash ( t[0, m-1] ) = t[0] * b^(m-1) + t[1] * b^[m-2] ..... t[m-1] * b^0
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­çš„ b æ˜¯ä¸€ä¸ªå¸¸æ•°åŸºæ•°ï¼Œåœ¨ Rabin-Karp ç®—æ³•ä¸­ï¼Œä¸€èˆ¬å–å€¼ä¸º 256ã€‚</p>
<p>äºæ˜¯ï¼Œåœ¨è®¡ç®— hash ( t[1, m] ) æ—¶ï¼Œåªéœ€è¦ä¸‹é¢è¿™æ ·å°±å¯ä»¥äº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hash( t[1, m] ) = hash ( t[0, m-1] ) - t[0] * b^(m-1)  + t[m] * b ^0
</code></pre></td></tr></table>
</div>
</div><figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/Rsync/rsync-algorithm.jpg" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/Rsync/rsync-algorithm.jpg" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/Rsync/rsync-algorithm.jpg" data-sub-html="<h2>rsync ç®—æ³•ç¤ºæ„</h2>">
        
    </a><figcaption class="image-caption">rsync ç®—æ³•ç¤ºæ„</figcaption>
    </figure>
<p>æœ€ç»ˆï¼Œå¾—åˆ°çš„æ•°æ®ç»„å¯ä»¥æƒ³è±¡ä¸º BT åè®®ä¸‹è½½ torrent ï¼šä¸€äº›æ–‡ä»¶å—å·²ä¸‹è½½ï¼ˆåŒ¹é…ä¸Šï¼‰ï¼Œå…¶ä»–çš„æ–‡ä»¶å—è¿˜æœªä¸‹è½½ï¼ˆæœªåŒ¹é…ä¸Šï¼‰ã€‚ç„¶åï¼ŒåŒæ­¥ç«¯å°†è¿™äº›æœªåŒ¹é…ä¸Šçš„æ–‡ä»¶æ‰“ä¸Šæ ‡å·å‘é€ï¼Œç›®çš„ç«¯æ ¹æ®æ ‡å·é‡ç»„æ–‡ä»¶å°±å®Œæˆäº†åŒæ­¥ã€‚</p>
<h2 id="ä½¿ç”¨-rsync">ä½¿ç”¨ rsync</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">rsync <span class="o">[</span>OPTION<span class="o">]</span>... SRC DEST
rsync <span class="o">[</span>OPTION<span class="o">]</span>... SRC <span class="o">[</span>USER@<span class="o">]</span> host:DEST
rsync <span class="o">[</span>OPTION<span class="o">]</span>... <span class="o">[</span>USER@<span class="o">]</span> HOST:SRC DEST
rsync <span class="o">[</span>OPTION<span class="o">]</span>... <span class="o">[</span>USER@<span class="o">]</span> HOST::SRC DEST
rsync <span class="o">[</span>OPTION<span class="o">]</span>... SRC <span class="o">[</span>USER@<span class="o">]</span> HOST::DEST
rsync <span class="o">[</span>OPTION<span class="o">]</span>... rsync://<span class="o">[</span>USER@<span class="o">]</span> HOST <span class="o">[</span>:PORT<span class="o">]</span>/SRC <span class="o">[</span>DEST<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>å¯¹åº”äºä»¥ä¸Šå…­ç§å‘½ä»¤æ ¼å¼ï¼Œ<code>rsync</code> æœ‰å…­ç§ä¸åŒçš„å·¥ä½œæ¨¡å¼ï¼š</p>
<ul>
<li>
<p>æ‹·è´æœ¬åœ°æ–‡ä»¶ã€‚å½“ <code>SRC</code> å’Œ <code>DES</code> è·¯å¾„ä¿¡æ¯éƒ½<strong>ä¸åŒ…å«</strong>æœ‰å•ä¸ªå†’å· &ldquo;:&rdquo; åˆ†éš”ç¬¦æ—¶å°±å¯åŠ¨è¿™ç§å·¥ä½œæ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -a /data/backup</code></p>
</li>
<li>
<p>ä½¿ç”¨ä¸€ä¸ªè¿œç¨‹ <code>shell</code> ç¨‹åº (å¦‚ rshã€ssh) æ¥å®ç°å°†æœ¬åœ°æœºå™¨çš„å†…å®¹æ‹·è´åˆ°è¿œç¨‹æœºå™¨ã€‚å½“ <code>DST</code> è·¯å¾„åœ°å€<strong>åŒ…å«å•ä¸ª</strong>å†’å· &ldquo;:&rdquo; åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -avz *.c foo:src</code></p>
</li>
<li>
<p>ä½¿ç”¨ä¸€ä¸ªè¿œç¨‹ <code>shell</code> ç¨‹åº (å¦‚ <code>rsh</code>ã€<code>ssh</code>) æ¥å®ç°å°†è¿œç¨‹æœºå™¨çš„å†…å®¹æ‹·è´åˆ°æœ¬åœ°æœºå™¨ã€‚å½“ <code>SRC</code> åœ°å€è·¯å¾„<strong>åŒ…å«å•ä¸ª</strong>å†’å· &ldquo;:&rdquo; åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -avz foo:src/bar/data</code></p>
</li>
<li>
<p>ä»è¿œç¨‹ <code>rsync</code> æœåŠ¡å™¨ä¸­æ‹·è´æ–‡ä»¶åˆ°æœ¬åœ°æœºã€‚å½“ <code>SRC</code> è·¯å¾„ä¿¡æ¯åŒ…å« &ldquo;::&rdquo; åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -av root@192.168.78.192::www /databack</code></p>
</li>
<li>
<p>ä»æœ¬åœ°æœºå™¨æ‹·è´æ–‡ä»¶åˆ°è¿œç¨‹ <code>rsync</code> æœåŠ¡å™¨ä¸­ã€‚å½“ <code>DST</code> è·¯å¾„ä¿¡æ¯åŒ…å« &ldquo;::&rdquo; åˆ†éš”ç¬¦æ—¶å¯åŠ¨è¯¥æ¨¡å¼ã€‚å¦‚ï¼š<code>rsync -av /databack root@192.168.78.192::www</code></p>
</li>
<li>
<p>åˆ—å‡ºè¿œç¨‹ä¸»æœºçš„æ–‡ä»¶åˆ—è¡¨ã€‚è¿™ç±»ä¼¼äº <code>rsync</code> ä¼ è¾“ï¼Œä¸è¿‡åªè¦åœ¨å‘½ä»¤ä¸­çœç•¥æ‰æœ¬åœ°æœºä¿¡æ¯å³å¯ã€‚å¦‚ï¼š<code>rsync -v rsync://192.168.78.192/www</code></p>
</li>
</ul>
<p>å¯ç”¨é€‰é¡¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">-v, --verbose è¯¦ç»†æ¨¡å¼è¾“å‡ºã€‚
-q, --quiet ç²¾ç®€è¾“å‡ºæ¨¡å¼ã€‚
-C, --cvs-exclude ä½¿ç”¨å’Œ CVS ä¸€æ ·çš„æ–¹æ³•è‡ªåŠ¨å¿½ç•¥æ–‡ä»¶ï¼Œç”¨æ¥æ’é™¤é‚£äº›ä¸å¸Œæœ›ä¼ è¾“çš„æ–‡ä»¶ã€‚
-c, --checksum æ‰“å¼€æ ¡éªŒå¼€å…³ï¼Œå¼ºåˆ¶å¯¹æ–‡ä»¶ä¼ è¾“è¿›è¡Œæ ¡éªŒã€‚
-a, --archive å½’æ¡£æ¨¡å¼ï¼Œè¡¨ç¤ºä»¥é€’å½’æ–¹å¼ä¼ è¾“æ–‡ä»¶ï¼Œå¹¶ä¿æŒæ‰€æœ‰æ–‡ä»¶å±æ€§ï¼Œç­‰äº - rlptgoDã€‚
-r, --recursive å¯¹å­ç›®å½•ä»¥é€’å½’æ¨¡å¼å¤„ç†ã€‚
-R, --relative ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¿¡æ¯ã€‚
-b, --backup åˆ›å»ºå¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯å¯¹äºç›®çš„å·²ç»å­˜åœ¨æœ‰åŒæ ·çš„æ–‡ä»¶åæ—¶ï¼Œå°†è€çš„æ–‡ä»¶é‡æ–°å‘½åä¸ºï½filenameã€‚å¯ä»¥ä½¿ç”¨ --suffix é€‰é¡¹æ¥æŒ‡å®šä¸åŒçš„å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚
-u, --update ä»…ä»…è¿›è¡Œæ›´æ–°ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡æ‰€æœ‰å·²ç»å­˜åœ¨äº DSTï¼Œå¹¶ä¸”æ–‡ä»¶æ—¶é—´æ™šäºè¦å¤‡ä»½çš„æ–‡ä»¶ï¼Œä¸è¦†ç›–æ›´æ–°çš„æ–‡ä»¶ã€‚
-l, --links ä¿ç•™è½¯é“¾ç»“ã€‚
-L, --copy-links æƒ³å¯¹å¾…å¸¸è§„æ–‡ä»¶ä¸€æ ·å¤„ç†è½¯é“¾ç»“ã€‚
-H, --hard-links ä¿ç•™ç¡¬é“¾ç»“ã€‚
-I, --ignore-times ä¸è·³è¿‡é‚£äº›æœ‰åŒæ ·çš„æ—¶é—´å’Œé•¿åº¦çš„æ–‡ä»¶ã€‚
-p, --perms ä¿æŒæ–‡ä»¶æƒé™ã€‚
-o, --owner ä¿æŒæ–‡ä»¶å±ä¸»ä¿¡æ¯ã€‚
-g, --group ä¿æŒæ–‡ä»¶å±ç»„ä¿¡æ¯ã€‚
-D, --devices ä¿æŒè®¾å¤‡æ–‡ä»¶ä¿¡æ¯ã€‚
-t, --times ä¿æŒæ–‡ä»¶æ—¶é—´ä¿¡æ¯ã€‚
-S, --sparse å¯¹ç¨€ç–æ–‡ä»¶è¿›è¡Œç‰¹æ®Šå¤„ç†ä»¥èŠ‚çœ DST çš„ç©ºé—´ã€‚
-T --temp-dir<span class="o">=</span>DIR åœ¨ DIR ä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚
-n, --dry-run ç°å®å“ªäº›æ–‡ä»¶å°†è¢«ä¼ è¾“ã€‚
-w, --whole-file æ‹·è´æ–‡ä»¶ï¼Œä¸è¿›è¡Œå¢é‡æ£€æµ‹ã€‚
-x, --one-file-system ä¸è¦è·¨è¶Šæ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œã€‚
-B, --block-size<span class="o">=</span>SIZE æ£€éªŒç®—æ³•ä½¿ç”¨çš„å—å°ºå¯¸ï¼Œé»˜è®¤æ˜¯ <span class="m">700</span> å­—èŠ‚ã€‚
-e, --rsh<span class="o">=</span><span class="nb">command</span> æŒ‡å®šä½¿ç”¨ rshã€ssh æ–¹å¼è¿›è¡Œæ•°æ®åŒæ­¥ã€‚
-P ç­‰åŒäº --partialã€‚
-z, --compress å¯¹å¤‡ä»½çš„æ–‡ä»¶åœ¨ä¼ è¾“æ—¶è¿›è¡Œå‹ç¼©å¤„ç†ã€‚
-h, --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚
--backup-dir å°†å¤‡ä»½æ–‡ä»¶ <span class="o">(</span>å¦‚ï½filename<span class="o">)</span> å­˜æ”¾åœ¨åœ¨ç›®å½•ä¸‹ã€‚
-suffix<span class="o">=</span>SUFFIX å®šä¹‰å¤‡ä»½æ–‡ä»¶å‰ç¼€ã€‚
--copy-unsafe-links ä»…ä»…æ‹·è´æŒ‡å‘ SRC è·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“ã€‚
--safe-links å¿½ç•¥æŒ‡å‘ SRC è·¯å¾„ç›®å½•æ ‘ä»¥å¤–çš„é“¾ç»“ã€‚
--rsync-path<span class="o">=</span>PATH æŒ‡å®šè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ rsync å‘½ä»¤æ‰€åœ¨è·¯å¾„ä¿¡æ¯ã€‚
--existing ä»…ä»…æ›´æ–°é‚£äº›å·²ç»å­˜åœ¨äº DST çš„æ–‡ä»¶ï¼Œè€Œä¸å¤‡ä»½é‚£äº›æ–°åˆ›å»ºçš„æ–‡ä»¶ã€‚
--delete åˆ é™¤é‚£äº› DST ä¸­ SRC æ²¡æœ‰çš„æ–‡ä»¶ã€‚
--delete-excluded åŒæ ·åˆ é™¤æ¥æ”¶ç«¯é‚£äº›è¢«è¯¥é€‰é¡¹æŒ‡å®šæ’é™¤çš„æ–‡ä»¶ã€‚
--delete-after ä¼ è¾“ç»“æŸä»¥åå†åˆ é™¤ã€‚
--ignore-errors åŠæ—¶å‡ºç° IO é”™è¯¯ä¹Ÿè¿›è¡Œåˆ é™¤ã€‚
--max-delete<span class="o">=</span>NUM æœ€å¤šåˆ é™¤ NUM ä¸ªæ–‡ä»¶ã€‚
--partial ä¿ç•™é‚£äº›å› æ•…æ²¡æœ‰å®Œå…¨ä¼ è¾“çš„æ–‡ä»¶ï¼Œä»¥æ˜¯åŠ å¿«éšåçš„å†æ¬¡ä¼ è¾“ã€‚
--force å¼ºåˆ¶åˆ é™¤ç›®å½•ï¼Œå³ä½¿ä¸ä¸ºç©ºã€‚
--numeric-ids ä¸å°†æ•°å­—çš„ç”¨æˆ·å’Œç»„ id åŒ¹é…ä¸ºç”¨æˆ·åå’Œç»„åã€‚
--timeout<span class="o">=</span><span class="nb">time</span> ip è¶…æ—¶æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚
--size-only å½“å†³å®šæ˜¯å¦è¦å¤‡ä»½æ–‡ä»¶æ—¶ï¼Œä»…ä»…å¯Ÿçœ‹æ–‡ä»¶å¤§å°è€Œä¸è€ƒè™‘æ–‡ä»¶æ—¶é—´ã€‚
--modify-window<span class="o">=</span>NUM å†³å®šæ–‡ä»¶æ˜¯å¦æ—¶é—´ç›¸åŒæ—¶ä½¿ç”¨çš„æ—¶é—´æˆ³çª—å£ï¼Œé»˜è®¤ä¸º 0ã€‚
--compare-dest<span class="o">=</span>DIR åŒæ ·æ¯”è¾ƒ DIR ä¸­çš„æ–‡ä»¶æ¥å†³å®šæ˜¯å¦éœ€è¦å¤‡ä»½ã€‚
--progress æ˜¾ç¤ºå¤‡ä»½è¿‡ç¨‹ã€‚
--exclude<span class="o">=</span>PATTERN æŒ‡å®šæ’é™¤ä¸éœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼ã€‚
--include<span class="o">=</span>PATTERN æŒ‡å®šä¸æ’é™¤è€Œéœ€è¦ä¼ è¾“çš„æ–‡ä»¶æ¨¡å¼ã€‚
--exclude-from<span class="o">=</span>FILE æ’é™¤ FILE ä¸­æŒ‡å®šæ¨¡å¼çš„æ–‡ä»¶ã€‚
--include-from<span class="o">=</span>FILE ä¸æ’é™¤ FILE æŒ‡å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶ã€‚
--version æ‰“å°ç‰ˆæœ¬ä¿¡æ¯ã€‚
--address ç»‘å®šåˆ°ç‰¹å®šçš„åœ°å€ã€‚
--config<span class="o">=</span>FILE æŒ‡å®šå…¶ä»–çš„é…ç½®æ–‡ä»¶ï¼Œä¸ä½¿ç”¨é»˜è®¤çš„ rsyncd.conf æ–‡ä»¶ã€‚
--port<span class="o">=</span>PORT æŒ‡å®šå…¶ä»–çš„ rsync æœåŠ¡ç«¯å£ã€‚
--blocking-io å¯¹è¿œç¨‹ shell ä½¿ç”¨é˜»å¡ IOã€‚
-stats ç»™å‡ºæŸäº›æ–‡ä»¶çš„ä¼ è¾“çŠ¶æ€ã€‚
--progress åœ¨ä¼ è¾“æ—¶ç°å®ä¼ è¾“è¿‡ç¨‹ã€‚
--log-format<span class="o">=</span>formAT æŒ‡å®šæ—¥å¿—æ–‡ä»¶æ ¼å¼ã€‚
--password-file<span class="o">=</span>FILE ä» FILE ä¸­å¾—åˆ°å¯†ç ã€‚
--bwlimit<span class="o">=</span>KBPS é™åˆ¶ I/O å¸¦å®½ï¼ŒKBytes per secondã€‚
</code></pre></td></tr></table>
</div>
</div><h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>
<p>[1] <a href="https://rsync.samba.org/tech_report/tech_report.html" target="_blank" rel="noopener noreferrer">The rsync algorithm</a></p>
</li>
<li>
<p>[2] <a href="https://coolshell.cn/articles/7425.html" target="_blank" rel="noopener noreferrer">RSYNC çš„æ ¸å¿ƒç®—æ³•</a></p>
</li>
<li>
<p>[3] <a href="https://zh.wikipedia.org/wiki/Rsync" target="_blank" rel="noopener noreferrer">rsync wikipedia</a></p>
</li>
<li>
<p>[4] <a href="https://ningyu1.github.io/linux-command/c/rsync.html" target="_blank" rel="noopener noreferrer">rsync command</a></p>
</li>
</ul>]]></description>
</item><item>
    <title>æ–‡ä»¶ä¼ è¾“ç³»åˆ—ï¼šSCP</title>
    <link>https://www.techkoala.top/scp/</link>
    <pubDate>Sat, 18 Jul 2020 10:28:05 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/scp/</guid>
    <description><![CDATA[<blockquote>
<p>SCP å°±æ˜¯ SSH åè®®çš„æ–‡ä»¶ä¼ è¾“åŠŸèƒ½å—ï¼Ÿ</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯-scp">ä»€ä¹ˆæ˜¯ SCP</h2>
<p>SCPï¼ˆSecure Copy Protocolï¼Œå®‰å…¨å¤åˆ¶åè®®ï¼‰å…è®¸æˆ‘ä»¬åœ¨ä¸¤å°è®¡ç®—æœºä¹‹é—´å¤åˆ¶æ–‡ä»¶ï¼ˆå’Œç›®å½•ï¼‰ã€‚</p>
<p>ä½¿ç”¨èµ·æ¥ç‰¹åˆ«æ–¹ä¾¿ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Shell" data-lang="Shell">$ scp local_file remote_host:/home
</code></pre></td></tr></table>
</div>
</div><p>è¿™å°†æŠŠæœ¬åœ°æ–‡ä»¶ <code>localfile</code> å¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºçš„ <code>/home</code> æ–‡ä»¶ä¹‹ä¸‹ã€‚</p>
<p><code>SCP</code> ä½¿ç”¨èµ·æ¥ç‰¹åˆ«ä¾¿åˆ©ï¼Œå› ä¸ºä»–èƒ½å·¥ä½œåœ¨å‡ ä¹æ‰€æœ‰çš„ <code>Unix-like</code> çš„ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸” <code>Windows</code> ä¸‹æ‹¥æœ‰è®¸å¤šå®¢æˆ·ç«¯ã€‚ä½†æ˜¯ä»…ä»…å¤åˆ¶æ–‡ä»¶å¹¶ä¸æ˜¯å…³é”®ã€‚<code>SCP</code> çœŸæ­£çš„ä»·å€¼æ˜¯å¯¹ <strong>è®¡ç®—æœºçš„èº«ä»½è¿›è¡ŒéªŒè¯</strong> ä»¥åŠå¯¹ <strong>ä¼ è¾“æ–‡ä»¶è¿›è¡ŒåŠ å¯†</strong>ï¼ˆä¹Ÿå°±æ˜¯ S ä»£è¡¨çš„å«ä¹‰ï¼‰ã€‚</p>
<p>ä½¿ç”¨å‰éœ€è¦é¦–å…ˆé…ç½®åˆ°è¿œç¨‹ä¸»æœºçš„ <code>SSH</code> è¿æ¥æƒé™ã€‚<code>SCP</code> çš„éªŒè¯æç¤ºå’Œ SSH çœ‹èµ·å¾ˆåƒï¼Œå› ä¸º <code>SCP</code> è·‘åœ¨ <code>SSH</code> çš„ä¸Šå±‚ï¼Œä»…ä»…æŠŠå®ƒä½œä¸ºæ–‡ä»¶æ•°æ®çš„ç®¡é“ã€‚äº‹å®ä¸Šï¼Œ<code>SSH</code> è´Ÿè´£å¤„ç†æ‰€æœ‰å®‰å…¨ç›¸å…³çš„ä»»åŠ¡ï¼Œ<code>SCP</code> åªæ˜¯å°†ä¸€äº›æ–‡ä»¶æ‰”åˆ° <code>SSH</code> è¿æ¥ä¸Šã€‚</p>
<p>ç»´åŸºç™¾ç§‘ä¸Šçš„æ¡ç›®è®²è¿°äº† <code>SCP</code> çš„å†å²ï¼Œç®€è€Œè¨€ä¹‹ï¼šåœ¨æ—§çš„ <code>BSD</code> ç³»ç»Ÿä¸Šæ›¾ç»æœ‰ä¸€ä¸ªå« <code>RCP</code> çš„å·¥å…·ï¼Œå¯ä»¥åœ¨ç”µè„‘ä¹‹é—´ç§»åŠ¨æ–‡ä»¶ã€‚åœ¨å½“æ—¶å—ä¿¡ä»»çš„ç½‘ç»œæ—¶ä»£ï¼Œæ¯ä¸ªäººéƒ½æ˜¯åˆ«äººçš„æœ‹å‹ã€‚åæ¥äººä»¬æ„è¯†åˆ°ï¼Œä¹Ÿè®¸å¹¶ä¸æ˜¯æ¯ä¸ªäººåœ¨ä»–ä»¬çš„ç½‘ç»œä¸Šéƒ½æ˜¯è¿™ä¹ˆå¥½çš„æœ‹å‹ã€‚äºæ˜¯æœ‰äººæŠŠ <code>RCP</code> çš„å®ç°å¤åˆ¶åˆ° <code>OpenSSH</code> çš„å‰èº«ä¸Šï¼Œç„¶åç®€å•åœ°åœ¨ <code>SSH</code> ä¼šè¯ä¸Šè¿è¡Œå®ƒï¼Œä»¥ä¿æŠ¤æ–‡ä»¶ä¸è¢«éå¥½å‹å‘ç°ã€‚é—®é¢˜è§£å†³äº†ï¼ä»æ­¤ä»¥åï¼Œå®ƒå°±ç•™åœ¨äº† <code>OpenSSH</code> ä¸­ã€‚</p>
<h2 id="scp-å·¥ä½œåŸç†">SCP å·¥ä½œåŸç†</h2>
<p><code>SCP</code> å¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†åè®®ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ª <code>RFC</code> æˆ–è€…ä»»ä½•å®˜æ–¹æè¿°å¦‚ä½•å®ç°å®ƒã€‚<code>OpenSSH</code> å®ç°æ˜¯ä¸€ä¸ªäº‹å®ä¸Šçš„è§„èŒƒã€‚æ­¤å®ç°æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šè¿æ¥å»ºç«‹å’Œä¹‹åçš„ä¼ è¾“åè®®ã€‚</p>
<h3 id="å»ºç«‹è¿æ¥">å»ºç«‹è¿æ¥</h3>
<p>å®é™…ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯çœŸæ­£çš„è¿æ¥ã€‚å› ä¸ºå®ƒåªæ˜¯åˆ©ç”¨ <code>SSH</code> æ‰§è¡Œå‘½ä»¤åçš„ <code>STDIN/STDOUT</code> ï¼Œæœ‰ç‚¹ç±»ä¼¼ <code>Unix</code> ç®¡é“ã€‚<code>OpenSSH</code> ä¸­åŒ…å«ä¸¤ä¸ªç¨‹åºæ¥å®Œæˆ:<code>sshd</code> å’Œ <code>scp</code>ã€‚<code>sshd</code> æ˜¯å§‹ç»ˆè¿è¡Œçš„æœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ï¼Œæ¥å—æ–°çš„ <code>SSH</code> è¿æ¥ã€‚<code>SCP</code> æ˜¯ä¼ªè£…æˆ <code>SSH</code> çš„å®¢æˆ·ç«¯ç¨‹åºï¼Œå‘é€å’Œæ¥å—æ–‡ä»¶ã€‚</p>
<p>å½“ <code>SCP</code> è¿è¡Œæ—¶ï¼Œä»–å°†å¼€å¯ä¸€ä¸ªæ–°çš„ <code>SSH</code> è¿æ¥ã€‚åœ¨è¯¥è¿æ¥ä¸Šï¼Œå®ƒä¼šåœ¨æœåŠ¡ç«¯æ‰§è¡Œå¦ä¸€ä¸ªå¸¦æœ‰ç‰¹æ®Šæ ‡å¿—çš„ <code>SCP</code> ç¨‹åºã€‚ä½ å¯ä»¥è®¤ä¸ºæ˜¯ <code>ssh exec scp [flags]</code>ã€‚ä¸»è¦çš„æ ‡å¿—åŒ…å« <code>-t</code>ï¼ˆ&ldquo;to&rdquo;ï¼‰å’Œ <code>-f</code>ï¼ˆ&ldquo;from&rdquo;ï¼‰ç”¨äºä»£è¡¨æ¥å—å’Œå‘é€ï¼Œè€Œ <code>-d</code> è¡¨ç¤ºæ–‡ä»¶å¤¹ï¼Œ<code>-r</code> è¡¨ç¤ºé€’å½’ã€‚</p>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/SCP/scp-1.png" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/SCP/scp-1.png" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/SCP/scp-1.png" data-sub-html="<h2>å»ºç«‹è¿æ¥</h2>">
        
    </a><figcaption class="image-caption">å»ºç«‹è¿æ¥</figcaption>
    </figure>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>SCP</code> åè®®æ˜¯å•å‘çš„ï¼Œä¸€ç«¯å‘é€æ–‡ä»¶ï¼Œå¦ä¸€ç«¯æ¥æ”¶æ–‡ä»¶ã€‚åœ¨è¿œç¨‹ç«¯ <code>SCP</code> å¼€å§‹è¿è¡Œåï¼Œå®é™…çš„ <code>SCP</code> åè®®å‘½ä»¤å¼€å§‹é€šè¿‡ <code>STDIN</code> å’Œ <code>STDOUT</code> è¿è¡Œã€‚</p>
<h3 id="ä¼ è¾“åè®®">ä¼ è¾“åè®®</h3>
<p>ç°åœ¨ï¼Œå®‰å…¨çš„ I/O é€šé“å»ºç«‹èµ·æ¥ï¼Œå¹¶ä¸”å·²ç»æœ‰æ•ˆåœ°åˆ‡æ¢åˆ° <code>RCP</code> åè®®ä¸Šã€‚è¯¥åè®®æ˜¯ <strong>é¡ºåº</strong>ï¼ˆä¸€æ¬¡ä¸€ä¸ªæ“ä½œï¼‰å’Œ <strong>åŒæ­¥</strong>ï¼ˆæ¯ä¸ªå‘½ä»¤æ‰§è¡Œå®Œåæ‰æ‰§è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ï¼‰æ‰§è¡Œçš„ã€‚</p>
<p>å‘½ä»¤æ ¼å¼å¤§è‡´ä¸ºï¼ˆä¸å¸¦æ‹¬å·æˆ–ç©ºæ ¼ï¼‰ï¼š<code>[command type][arguments]\n [optional data]</code></p>
<ul>
<li>
<p>[command type] é€šå¸¸æ˜¯ä¸€ä¸ª ASCII å­—ç¬¦ï¼š</p>
<ul>
<li>&lsquo;C&rsquo;- å†™å…¥æ–‡ä»¶</li>
<li>&lsquo;D&rsquo;- è¾“å…¥ç›®å½•</li>
<li>&lsquo;E&rsquo;- é€€å‡ºæœ€åä¸€ä¸ªç›®å½•</li>
<li>&lsquo;T&rsquo;- è®¾ç½®ä¸‹ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„åˆ›å»º / æ›´æ–°æ—¶é—´æˆ³</li>
</ul>
</li>
<li>
<p>[arguments] æ˜¯ç‰¹å®šäºå‘½ä»¤çš„ï¼Œå¦‚æ–‡ä»¶ / ç›®å½•åç§°ã€æ–‡ä»¶å¤§å°æˆ–æ—¶é—´æˆ³ã€‚&ldquo;E&rdquo; å‘½ä»¤æ²¡æœ‰å‚æ•°ã€‚</p>
</li>
<li>
<p>[optional data] åœ¨ä¸Šä¸€ä¸ªå‘½ä»¤ä¸º &ldquo;C&rdquo;ï¼ˆåˆ›å»ºæ–‡ä»¶ï¼‰æ—¶å‘é€ã€‚æ•°æ®çš„å¤§å°æŒ‡å®šä¸º &ldquo;C&rdquo; çš„å‚æ•°ã€‚</p>
</li>
</ul>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰æ§åˆ¶å­—èŠ‚ï¼Œè¿™äº›å­—èŠ‚æ˜¯åœ¨æ²¡æœ‰æ–°è¡Œçš„æƒ…å†µä¸‹è‡ªå·±å‘é€çš„ï¼š</p>
<ul>
<li>
<p>&lsquo;0x00&rsquo;-&ldquo;OK&rdquo;ï¼Œç¡®è®¤å®Œæˆæœ€åä¸€ä¸ªå‘½ä»¤ï¼ˆå¦‚ç¼–å†™æœ¬åœ°æ–‡ä»¶ï¼‰ã€‚æ¥æ”¶æ–¹ä¹Ÿä¼šåœ¨å¯åŠ¨æ—¶å‘é€æ­¤æ¶ˆæ¯ï¼Œè®©å‘é€æ–¹çŸ¥é“å®ƒå·²å‡†å¤‡å¥½æ¥æ”¶å‘½ä»¤ã€‚</p>
</li>
<li>
<p>&lsquo;0x00&rsquo;-&ldquo;è­¦å‘Š&rdquo;ï¼Œåé¢æ˜¯è¦å‘ç”¨æˆ·æ˜¾ç¤ºçš„è¡Œï¼ˆç”±æ–°è¡Œç»ˆæ­¢ï¼‰ã€‚</p>
</li>
<li>
<p>&lsquo;0x00&rsquo;-&ldquo;é”™è¯¯&rdquo; åè·Ÿéšå¯é€‰æ¶ˆæ¯ï¼ˆå’Œè­¦å‘Šç›¸åŒï¼‰ï¼Œä½†è¿æ¥éšåç»ˆæ­¢ã€‚</p>
</li>
</ul>
<p>ä¸‹é¢è¿™ä¸ªå¸¦æœ‰æ³¨é‡Šçš„å›¾ç‰‡å®ä¾‹ï¼Œè¯¦ç»†è®²è¿°äº†è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/SCP/scp-2.png" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/SCP/scp-2.png" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Software/SCP/scp-2.png" data-sub-html="<h2>ä¼ è¾“è¿‡ç¨‹</h2>">
        
    </a><figcaption class="image-caption">ä¼ è¾“è¿‡ç¨‹</figcaption>
    </figure>
<h2 id="ä½¿ç”¨-scp">ä½¿ç”¨ SCP</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ scp é€‰é¡¹ å‚æ•°
</code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­é€‰é¡¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">-1ï¼šä½¿ç”¨sshåè®®ç‰ˆæœ¬1ï¼›
-2ï¼šä½¿ç”¨sshåè®®ç‰ˆæœ¬2ï¼›
-4ï¼šä½¿ç”¨ipv4ï¼›
-6ï¼šä½¿ç”¨ipv6ï¼›
-Bï¼šä»¥æ‰¹å¤„ç†æ¨¡å¼è¿è¡Œï¼›
-Cï¼šä½¿ç”¨å‹ç¼©ï¼›
-Fï¼šæŒ‡å®šsshé…ç½®æ–‡ä»¶ï¼›
-lï¼šæŒ‡å®šå®½å¸¦é™åˆ¶ï¼›
-oï¼šæŒ‡å®šä½¿ç”¨çš„sshé€‰é¡¹ï¼›
-Pï¼šæŒ‡å®šè¿œç¨‹ä¸»æœºçš„ç«¯å£å·ï¼›
-pï¼šä¿ç•™æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ï¼Œæœ€åè®¿é—®æ—¶é—´å’Œæƒé™æ¨¡å¼ï¼›
-qï¼šä¸æ˜¾ç¤ºå¤åˆ¶è¿›åº¦ï¼›
-rï¼šä»¥é€’å½’æ–¹å¼å¤åˆ¶ã€‚
</code></pre></td></tr></table>
</div>
</div><p>å‚æ•°åˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>æºæ–‡ä»¶ï¼šæŒ‡å®šè¦å¤åˆ¶çš„æºæ–‡ä»¶ã€‚</li>
<li>ç›®æ ‡æ–‡ä»¶ï¼šæ ¼å¼ä¸º user@hostï¼šfilenameï¼ˆæ–‡ä»¶åä¸ºç›®æ ‡æ–‡ä»¶çš„åç§°ï¼‰ã€‚</li>
</ul>
<h2 id="scp-çš„é—®é¢˜">SCP çš„é—®é¢˜</h2>
<p>çœ‹èµ·æ¥ï¼Œ<code>SCP</code> å¬èµ·æ¥ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ã€‚å®ƒæ˜¯ä¸€ä¸ªç®€å•æ˜“ç”¨çš„å·¥å…·ï¼Œç„¶è€Œå­˜åœ¨ä¸€äº›ç°å®é—®é¢˜ã€‚</p>
<h3 id="æ€§èƒ½">æ€§èƒ½</h3>
<p>ä¼ è¾“åè®®çš„é¡ºåºæ€§ï¼šæ¯ä¸ªå‘½ä»¤çš„å¼ºåˆ¶ç¡®è®¤éƒ½ä¼šå¢åŠ å¤§é‡å¼€é”€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ²¿é€”ä¸¢å¼ƒå•ä¸ªç¡®è®¤æ•°æ®åŒ…ï¼Œåˆ™æ•´ä¸ªè¿æ¥å°†æš‚åœï¼Œç›´åˆ°é‡æ–°ä¼ è¾“å¼€å§‹ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå‘é€æ‰€æœ‰æ•°æ®è€Œä¸å‹ç¼©æˆ–è¯¢é—®æ¥æ”¶æ–¹æ˜¯å¦å·²ç»æ‹¥æœ‰è¯¥æ–‡ä»¶å¹¶ä¸ç†æƒ³ã€‚</p>
<p>æœ‰ç»éªŒçš„ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥å‘Šè¯‰æ‚¨ï¼Œä½¿ç”¨ <code>tar</code> å½’æ¡£æ–‡ä»¶å¹¶å‘é€æ¯”ä½¿ç”¨ <code>scp</code> é€’å½’å‘½ä»¤ä¼ è¾“è¦å¿«å¾—å¤šã€‚äº‹å®ä¸Šï¼Œè¿™æ ·çš„è¯ä½ ç”šè‡³æ— éœ€ä½¿ç”¨ SCPï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-Shell" data-lang="Shell"><span class="c1"># Copy a local folder with 10000 files</span>
$ find /tmp/big_folder/-type f <span class="p">|</span> wc -l
<span class="m">10000</span>

<span class="c1"># Using scp</span>
$ <span class="nb">time</span> scp -r -q /tmp/big_folder/server:/tmp/big_folder

________________________________________________________
Executed in  882.99 millis	fish       	external
   usr <span class="nb">time</span>  114.09 millis	0.00 micros  114.09 millis
   sys <span class="nb">time</span>  278.46 millis  949.00 micros  277.51 millis

<span class="c1"># Using tar over ssh</span>
$ <span class="nb">time</span> sh -c <span class="s2">&#34;tar cf - /tmp/big_folder | ssh server &#39;tar xC /tmp/-f -&#39;&#34;</span>
tar: Removing leading <span class="s1">&#39;/&#39;</span> from member names

________________________________________________________
Executed in  215.68 millis	fish       	external
   usr <span class="nb">time</span>   93.22 millis	0.00 micros   93.22 millis
   sys <span class="nb">time</span>   66.51 millis  897.00 micros   65.62 millis
</code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿™ç§æ¯”è¾ƒç³Ÿç³•çš„æƒ…å†µä¸‹ï¼Œ<code>tar&amp;ssh</code> çš„ 215.68ms å¯¹æ¯” <code>SCP</code> çš„ 882.99msï¼Œè¶³è¶³æœ‰å››å€çš„é€Ÿåº¦æå‡ã€‚</p>
<h3 id="å®‰å…¨">å®‰å…¨</h3>
<p>æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œ<code>SCP</code> é  <code>SSH</code> è´Ÿæ‹…å®‰å…¨å·¥ä½œï¼Œå› æ­¤å®ƒå®Œå…¨å®‰å…¨&hellip; å—ï¼Ÿ</p>
<p><code>OpenSSH</code> çš„å‘è¡Œè¯´æ˜æåˆ°ï¼š</p>
<blockquote>
<p>scp åè®®å·²ç»è¿‡æ—¶ã€ä¸çµæ´»ä¸”ä¸å®¹æ˜“ä¿®å¤ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨æ›´ç°ä»£çš„åè®®ï¼Œå¦‚ sftp å’Œ rsync æ¥ä¼ è¾“æ–‡ä»¶ã€‚</p>
</blockquote>
<p>å¦‚æœè¿œç¨‹ç«¯çš„ <code>shell</code> æ‰“å°å‡ºä»»ä½•éäº¤äº’å¼ä¼šè¯ï¼Œåˆ™æœ¬åœ° <code>SCP</code> è¿›ç¨‹å°†æ„‰å¿«åœ°å°†è¯¥è¾“å‡ºè§£é‡Šä¸º <code>SCP</code> å‘½ä»¤ã€‚å¥½çš„è¯ï¼Œè¿™ä»…ä»…æ˜¯æ‰“ç ´ <code>SCP</code> åè®®ä¸­æ¨¡ç³Šçš„é”™è¯¯ã€‚ä½†åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿œç¨‹ <code>shell</code> å¯åŠ¨è„šæœ¬æ˜¯æ¶æ„çš„ï¼Œå¹¶å‘ä½ å‘é€æ¶æ„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰€éœ€çš„æ–‡ä»¶ã€‚</p>
<p>æ­¤å¤–ï¼Œæ—©åœ¨ 2018 å¹´ï¼ŒHarry Sintonen å°±å‘ç°äº†æµè¡Œçš„ <code>SCP</code> å®ç°ï¼ˆåŒ…æ‹¬ <code>OpenSSH</code>ï¼‰ä¸­çš„ä¸€å †æ¼æ´ã€‚åŒ…æ‹¬ä»ä¿®æ”¹ç›®å½•çš„æƒé™åˆ°è¦†ç›–ä»»æ„æ–‡ä»¶ï¼ˆç”±äº <code>ï½/.ssh/authorized_keys</code> æˆ– <code>ï½/.bashrc</code>ï¼‰ã€æœ‰æ•ˆåœ°æ‰§è¡Œä»£ç ï¼Œä»¥åŠæ³¨å…¥ç»ˆç«¯è½¬ä¹‰åºåˆ—æ¥éšè—ä»»ä½•è¿½è¸ªã€‚è¿™äº›æ¼æ´å¯¹äºä»»ä½•æ„å»ºç½‘ç»œ <code>CLI</code> åº”ç”¨ç¨‹åºçš„äººæ¥è¯´éƒ½æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ•™è®­ã€‚</p>
<h2 id="scp-çš„æ›¿ä»£æ–¹æ¡ˆ">SCP çš„æ›¿ä»£æ–¹æ¡ˆ</h2>
<p><code>SFTP</code> è¢«å¹¿æ³›è®¤ä¸ºæ˜¯ <code>SCP</code> çš„ç»§æ‰¿è€…ã€‚ä¸ºäº†ä¼ è¾“å±‚å®‰å…¨æ€§ï¼Œå®ƒä»ç„¶åœ¨ <code>SSH</code> ä¸Šè¿è¡Œï¼Œå¹¶ä¸”ä¸éœ€è¦å•ç‹¬è®¾ç½®è®¿é—®ã€‚å®ƒå¯ä»¥ä¸ºæ‚¨æä¾›ä¸€ä¸ªè‡ªå®šä¹‰äº¤äº’å¼æç¤ºæ¥æ¢ç´¢è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨é¢„å…ˆç¼–å†™çš„ä¸€ç³»åˆ—å‘½ä»¤ç¼–å†™è„šæœ¬ã€‚
ç¼ºç‚¹æ˜¯ï¼Œæ‚¨éœ€è¦å­¦ä¹  <code>SFTP</code> æç¤ºå‘½ä»¤ï¼Œåè®®æœ¬èº«å°šæœªå®Œå…¨æ ‡å‡†åŒ–ï¼ˆæœ‰å¾ˆå¤š <code>RFC</code> è‰ç¨¿ï¼Œä½†ä½œè€…æœ€ç»ˆæ”¾å¼ƒäº†ï¼‰ã€‚</p>
<p><code>Rsync</code> æ˜¯å¦ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ä½¿ç”¨ä¸ <code>SCP</code> å‘½ä»¤å®Œå…¨ç›¸åŒ - å®ƒä¹Ÿåˆ©ç”¨ <code>SSH</code>ã€‚<code>Rsync</code> ç€é‡ä¼˜åŒ–æ€§èƒ½ - å®ƒæ‰§è¡Œå¤§é‡çš„å¤æ‚æœ¬åœ°è®¡ç®—ä»è€Œé€šè¿‡ç½‘ç»œå‘é€å°½å¯èƒ½å°‘çš„æ•°æ®ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œå®ƒè‡´åŠ›äºæ•°æ®åŒæ­¥è€Œä¸æ˜¯çº¯ä¼ è¾“æ–‡ä»¶ - å¦‚æœè¿œç¨‹å’Œæœ¬åœ°å†…å®¹ç›¸ä¼¼ï¼Œåˆ™åªä¼šå‘é€å¢é‡ã€‚</p>
<p>åŒæ ·ï¼Œå®ƒä¹Ÿæœ‰å…¶è‡ªèº«çš„ç¼ºç‚¹ï¼šå‘é€æ–¹ä½¿ç”¨å¤§é‡çš„ CPU èµ„æºæ¥è®¡ç®—è¦å‘é€ä»€ä¹ˆï¼Œå¹¶ä¸”æ¥æ”¶æ–¹ä½¿ç”¨å¤§é‡ç£ç›˜ IO å°†æ•°æ®æŒ‰æ­£ç¡®çš„é¡ºåºæ”¾åœ¨ä¸€èµ·ã€‚ä¸ <code>OpenSSH</code> ä¸åŒï¼Œ<code>Rsync</code> åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šå¹¶ä¸é¢„å®‰è£…ã€‚</p>
<h2 id="ç»“è®º">ç»“è®º</h2>
<p><code>SCP</code> æ˜¯ä¸€ä¸ªç®€å•çš„å·¥å…·ï¼Œå®ƒåœ¨å¤åˆ¶æ–‡ä»¶æ–¹é¢åšå¾—å¾ˆå¥½ï¼Œä½†è¾ƒæ–°çš„è½¯ä»¶åœ¨å¾ˆå¤šæ–¹é¢éƒ½ä¼˜äºå®ƒã€‚å¯¹äºæ‚¨ä¿¡ä»»çš„è®¡ç®—æœºä¹‹é—´çš„ä¸ªäººç®€å•ä½¿ç”¨ï¼Œ<code>SCP</code> ä»ç„¶é€‚åˆã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ‚¨é‡åˆ°æ€§èƒ½é—®é¢˜æˆ–éœ€è¦æ»¡è¶³æ›´é«˜çš„å®‰å…¨æ ‡å‡†ï¼Œåˆ™ä¸Šé¢åˆ—å‡ºçš„ä»»ä½•å¤‡é€‰æ–¹æ¡ˆéƒ½æ¯” <code>SCP</code> æ›´å¯å–ã€‚é€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„ï¼Œç„¶åè¯•ç€å¼€å§‹ä½¿ç”¨ã€‚</p>
<h2 id="å¦è§">å¦è§</h2>
<ul>
<li><a href="https://www.techkoala.top/rsync/" target="_blank" rel="noopener noreferrer">rsync</a></li>
<li><a href="https://www.techkoala.top/sftp/" target="_blank" rel="noopener noreferrer">SFTP</a></li>
</ul>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>
<p>[1] <a href="https://gravitational.com/blog/scp-familiar-simple-insecure-slow/" target="_blank" rel="noopener noreferrer">SCP - Familiar, Simple, Insecure, and Slow</a></p>
</li>
<li>
<p>[2] <a href="https://en.wikipedia.org/wiki/Secure_copy" target="_blank" rel="noopener noreferrer">Wikipedia Secure copy</a></p>
</li>
<li>
<p>[3] <a href="https://lists.mindrot.org/pipermail/openssh-unix-dev/2019-March/037672.html" target="_blank" rel="noopener noreferrer">Call for testing: OpenSSH 8.0</a></p>
</li>
<li>
<p>[4] <a href="https://ningyu1.github.io/linux-command/c/scp.html" target="_blank" rel="noopener noreferrer">Scp</a></p>
</li>
</ul>]]></description>
</item><item>
    <title>Huginnï¼ˆDockerï¼‰æ•°æ®å¤‡ä»½ä¸æ¢å¤</title>
    <link>https://www.techkoala.top/huginn_backup/</link>
    <pubDate>Wed, 27 May 2020 23:06:20 &#43;0800</pubDate>
    <author>ä½œè€…</author>
    <guid>https://www.techkoala.top/huginn_backup/</guid>
    <description><![CDATA[<figure><a class="lightgallery" href="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Huginn/Huginn.png" title="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Huginn/Huginn.png" data-thumbnail="https://cdn.jsdelivr.net/gh/techkoala/techkoala.github.io@master/images/Huginn/Huginn.png" data-sub-html="<h2>Huginn</h2>">
        
    </a><figcaption class="image-caption">Huginn</figcaption>
    </figure>
<blockquote>
<p>ç®€å•ä»‹ç»ä½¿ç”¨ Docker è¿è¡Œçš„ Huginn æ•°æ®çš„å¤‡ä»½ä¸æ¢å¤</p>
</blockquote>
<h3 id="å¤‡ä»½æ•°æ®">å¤‡ä»½æ•°æ®</h3>
<p>ä½¿ç”¨å‘½ä»¤åœ¨å®¹å™¨ä¸­ç”Ÿæˆå¤‡ä»½ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker <span class="nb">exec</span> -it huginn mysqldump --single-transaction --opt -u root -ppassword huginn_production &gt; huginn_backupfile.sql
</code></pre></td></tr></table>
</div>
</div><p>æˆ–ç›´æ¥æ‹·è´æ•°æ®åˆ°å®¹å™¨å¤–ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker <span class="nb">exec</span> -it  huginn mysqldump -u root -ppassword huginn_production &gt; /root/test_db.sql
</code></pre></td></tr></table>
</div>
</div><h3 id="æ¢å¤æ•°æ®">æ¢å¤æ•°æ®</h3>
<p>é¦–å…ˆå¤åˆ¶æ–‡ä»¶åˆ° <code>docker</code> ä¸­ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker cp /home/xxxx/huginn_backupfile.sql huginn:/app/huginn_backupfile.sql
</code></pre></td></tr></table>
</div>
</div><p>ç„¶åè¿›å…¥ <code>docker</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker <span class="nb">exec</span> -ti huginn bash
</code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥æ¢å¤æ•°æ®åº“:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ mysql -u root -ppassword huginn_production &lt; huginn_backupfile.sql
</code></pre></td></tr></table>
</div>
</div>]]></description>
</item></channel>
</rss>
